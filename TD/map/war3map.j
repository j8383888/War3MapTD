//===========================================================================
// 
// 只是另外一张魔兽争霸的地图
// 
//   Warcraft III map script
//   Generated by the Warcraft III World Editor
//   Date: Wed Sep 23 15:45:44 2020
//   Map Author: 未知
// 
//===========================================================================

//***************************************************************************
//*
//*  Global Variables
//*
//***************************************************************************

#define USE_BJ_ANTI_LEAK
#include <YDTrigger/Import.h>
#include <YDTrigger/YDTrigger.h>
globals
    // User-defined
    group                   udg_HuoYuanSuGroup         = null
    group                   udg_ShuiYuanSuGroup        = null
    group                   udg_ThunderGroup           = null
    group                   udg_ThunderGroup3          = null
    group                   udg_XuanYunGroup           = null
    group                   udg_FengYuanSuGroup        = null
    group                   udg_HLGroup                = null
    group                   udg_HuiFuGroup             = null
    group                   udg_FengLeiJianGroup       = null
    integer                 udg_WaveTxt                = 0
    integer                 udg_TimeTxt                = 0
    integer                 udg_WaveNum                = 0
    integer                 udg_TimeNum                = 0
    force                   udg_playerGroup            = null
    multiboard              udg_Multiboard             = null

    // Generated
    rect                    gg_rct_rect1_1             = null
    rect                    gg_rct_rect1_2             = null
    rect                    gg_rct_rect1_3             = null
    rect                    gg_rct_rect1_4             = null
    rect                    gg_rct_rect1_5             = null
    rect                    gg_rct_rect1_6             = null
    rect                    gg_rct_rect1_7             = null
    rect                    gg_rct_rect1_8             = null
    rect                    gg_rct_rect1_9             = null
    rect                    gg_rct_start               = null
    rect                    gg_rct_rect1_5_5           = null
    trigger                 gg_trg_monster             = null
    trigger                 gg_trg_MoveRect            = null
    trigger                 gg_trg_Init                = null
    trigger                 gg_trg_Camera              = null
    trigger                 gg_trg_Skill               = null
    trigger                 gg_trg_Eff                 = null
    trigger                 gg_trg_AddXuanYun          = null
    trigger                 gg_trg_HurtTrigger         = null
    trigger                 gg_trg_Test                = null
    trigger                 gg_trg_Clock               = null
    trigger                 gg_trg_Damage              = null
    trigger                 gg_trg_HurtCenter          = null
    trigger                 gg_trg_Esc                 = null
    trigger                 gg_trg_CheckXieLou         = null
    trigger                 gg_trg_DeadEvent           = null
    trigger                 gg_trg_Clear               = null
    trigger                 gg_trg_HuoYuanSu           = null
    trigger                 gg_trg_RanBao              = null
    trigger                 gg_trg_shuiYuanSu          = null
    trigger                 gg_trg_leiYuanSu           = null
    trigger                 gg_trg_fengYuanSu          = null
    trigger                 gg_trg_leiBao              = null
    trigger                 gg_trg_zhenFa              = null
    trigger                 gg_trg_shaoShang           = null
    trigger                 gg_trg_dongShang           = null
    trigger                 gg_trg_hanleng             = null
    trigger                 gg_trg_ronghua             = null
    trigger                 gg_trg_huifu               = null
    trigger                 gg_trg_chaoDao             = null
    trigger                 gg_trg_chaoZai             = null
    trigger                 gg_trg_shuaxin             = null
    trigger                 gg_trg_fengLeiJian         = null
    unit                    gg_unit_h002_0004          = null
    unit                    gg_unit_h001_0002          = null
    trigger                 gg_trg_UIInit              = null
    trigger                 gg_trg_GlobeInit           = null
    trigger                 gg_trg_Multiboard          = null
#include <YDTrigger/Globals.h>
endglobals
#include <YDTrigger/Function.h>

function InitGlobals takes nothing returns nothing
    set udg_HuoYuanSuGroup = CreateGroup()
    set udg_ShuiYuanSuGroup = CreateGroup()
    set udg_ThunderGroup = CreateGroup()
    set udg_ThunderGroup3 = CreateGroup()
    set udg_XuanYunGroup = CreateGroup()
    set udg_FengYuanSuGroup = CreateGroup()
    set udg_HLGroup = CreateGroup()
    set udg_HuiFuGroup = CreateGroup()
    set udg_FengLeiJianGroup = CreateGroup()
    set udg_WaveNum = 0
    set udg_TimeNum = 0
    set udg_playerGroup = CreateForce()
endfunction

//***************************************************************************
//*
//*  Unit Creation
//*
//***************************************************************************

//===========================================================================
function CreateBuildingsForPlayer0 takes nothing returns nothing
    local player p = Player(0)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set gg_unit_h001_0002 = CreateUnit( p, 'h001', -27418.7, 10581.2, 274.029 )
endfunction

//===========================================================================
function CreateUnitsForPlayer6 takes nothing returns nothing
    local player p = Player(6)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'u005', -27187.9, 10075.9, 149.056 )
endfunction

//===========================================================================
function CreateBuildingsForPlayer9 takes nothing returns nothing
    local player p = Player(9)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'h002', -26694.2, 9567.9, 9.950 )
    set u = CreateUnit( p, 'h002', -27073.3, 9553.9, 9.950 )
    set gg_unit_h002_0004 = CreateUnit( p, 'h002', -26882.3, 9537.0, 9.950 )
endfunction

//===========================================================================
function CreatePlayerBuildings takes nothing returns nothing
    call CreateBuildingsForPlayer0(  )
    call CreateBuildingsForPlayer9(  )
endfunction

//===========================================================================
function CreatePlayerUnits takes nothing returns nothing
    call CreateUnitsForPlayer6(  )
endfunction

//===========================================================================
function CreateAllUnits takes nothing returns nothing
    call CreatePlayerBuildings(  )
    call CreatePlayerUnits(  )
endfunction

//***************************************************************************
//*
//*  Regions
//*
//***************************************************************************

function CreateRegions takes nothing returns nothing
    local weathereffect we

    set gg_rct_rect1_1 = Rect( -26432.0, 9024.0, -26304.0, 9152.0 )
    set gg_rct_rect1_2 = Rect( -27520.0, 9024.0, -27392.0, 9152.0 )
    set gg_rct_rect1_3 = Rect( -27456.0, 9824.0, -27328.0, 9952.0 )
    set gg_rct_rect1_4 = Rect( -28160.0, 9760.0, -28032.0, 9888.0 )
    set gg_rct_rect1_5 = Rect( -28096.0, 8320.0, -27968.0, 8448.0 )
    set gg_rct_rect1_6 = Rect( -22656.0, 8384.0, -22528.0, 8512.0 )
    set gg_rct_rect1_7 = Rect( -22720.0, 13536.0, -22592.0, 13664.0 )
    set gg_rct_rect1_8 = Rect( -25472.0, 13472.0, -25344.0, 13600.0 )
    set gg_rct_rect1_9 = Rect( -25408.0, 14176.0, -25280.0, 14304.0 )
    set gg_rct_start = Rect( -26496.0, 9760.0, -26240.0, 10080.0 )
    set gg_rct_rect1_5_5 = Rect( -25408.0, 8384.0, -25280.0, 8512.0 )
endfunction

//***************************************************************************
//*
//*  Custom Script Code
//*
//***************************************************************************
//TESH.scrollpos=0
//TESH.alwaysfold=0

//***************************************************************************
//*
//*  Triggers
//*
//***************************************************************************

//===========================================================================
// Trigger: monster
//===========================================================================
function Trig_monsterFunc001T takes nothing returns nothing
    call YDLocalSet(GetExpiredTimer(), unit, "unit", CreateUnit(Player(11), 'hfoo', GetRectCenterX(gg_rct_start), GetRectCenterY(gg_rct_start), 0))
    call YDLocalSet(GetExpiredTimer(), rect, "rect", gg_rct_rect1_1)
    call SetUnitPathing( YDLocalGet(GetExpiredTimer(), unit, "unit"), false )
    call IssuePointOrder( YDLocalGet(GetExpiredTimer(), unit, "unit"), "move", GetRectCenterX(YDLocalGet(GetExpiredTimer(), rect, "rect")), GetRectCenterY(YDLocalGet(GetExpiredTimer(), rect, "rect")) )
    call YDLocalSet(GetExpiredTimer(), integer, "i", ( YDLocalGet(GetExpiredTimer(), integer, "i") + 1 ))
    if ((YDLocalGet(GetExpiredTimer(), integer, "i") == 100)) then
        call YDLocal3Release()
        call DestroyTimer(GetExpiredTimer())
    else
    endif
endfunction

function Trig_monsterFunc002Conditions takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    set ydl_trigger = gg_trg_MoveRect
    YDLocalExecuteTrigger(ydl_trigger)
    call YDLocal5Set(unit, "unit", YDLocalGet(GetTriggeringTrigger(), unit, "unit"))
    call YDLocal5Set(rect, "rect", gg_rct_rect1_1)
    call YDTriggerExecuteTrigger(ydl_trigger,false)
    set ydl_trigger = null
endfunction

function Trig_monsterFunc003Conditions takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    set ydl_trigger = gg_trg_MoveRect
    YDLocalExecuteTrigger(ydl_trigger)
    call YDLocal5Set(unit, "unit", YDLocalGet(GetTriggeringTrigger(), unit, "unit"))
    call YDLocal5Set(rect, "rect", gg_rct_rect1_2)
    call YDTriggerExecuteTrigger(ydl_trigger,false)
    set ydl_trigger = null
endfunction

function Trig_monsterFunc004Conditions takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    set ydl_trigger = gg_trg_MoveRect
    YDLocalExecuteTrigger(ydl_trigger)
    call YDLocal5Set(unit, "unit", YDLocalGet(GetTriggeringTrigger(), unit, "unit"))
    call YDLocal5Set(rect, "rect", gg_rct_rect1_3)
    call YDTriggerExecuteTrigger(ydl_trigger,false)
    set ydl_trigger = null
endfunction

function Trig_monsterFunc005Conditions takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    set ydl_trigger = gg_trg_MoveRect
    YDLocalExecuteTrigger(ydl_trigger)
    call YDLocal5Set(unit, "unit", YDLocalGet(GetTriggeringTrigger(), unit, "unit"))
    call YDLocal5Set(rect, "rect", gg_rct_rect1_4)
    call YDTriggerExecuteTrigger(ydl_trigger,false)
    set ydl_trigger = null
endfunction

function Trig_monsterFunc006Conditions takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    set ydl_trigger = gg_trg_MoveRect
    YDLocalExecuteTrigger(ydl_trigger)
    call YDLocal5Set(unit, "unit", YDLocalGet(GetTriggeringTrigger(), unit, "unit"))
    call YDLocal5Set(rect, "rect", gg_rct_rect1_5)
    call YDTriggerExecuteTrigger(ydl_trigger,false)
    set ydl_trigger = null
endfunction

function Trig_monsterFunc007Conditions takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    set ydl_trigger = gg_trg_MoveRect
    YDLocalExecuteTrigger(ydl_trigger)
    call YDLocal5Set(unit, "unit", YDLocalGet(GetTriggeringTrigger(), unit, "unit"))
    call YDLocal5Set(rect, "rect", gg_rct_rect1_5_5)
    call YDTriggerExecuteTrigger(ydl_trigger,false)
    set ydl_trigger = null
endfunction

function Trig_monsterFunc008Conditions takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    set ydl_trigger = gg_trg_MoveRect
    YDLocalExecuteTrigger(ydl_trigger)
    call YDLocal5Set(unit, "unit", YDLocalGet(GetTriggeringTrigger(), unit, "unit"))
    call YDLocal5Set(rect, "rect", gg_rct_rect1_6)
    call YDTriggerExecuteTrigger(ydl_trigger,false)
    set ydl_trigger = null
endfunction

function Trig_monsterFunc009Conditions takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    set ydl_trigger = gg_trg_MoveRect
    YDLocalExecuteTrigger(ydl_trigger)
    call YDLocal5Set(unit, "unit", YDLocalGet(GetTriggeringTrigger(), unit, "unit"))
    call YDLocal5Set(rect, "rect", gg_rct_rect1_7)
    call YDTriggerExecuteTrigger(ydl_trigger,false)
    set ydl_trigger = null
endfunction

function Trig_monsterFunc010Conditions takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    set ydl_trigger = gg_trg_MoveRect
    YDLocalExecuteTrigger(ydl_trigger)
    call YDLocal5Set(unit, "unit", YDLocalGet(GetTriggeringTrigger(), unit, "unit"))
    call YDLocal5Set(rect, "rect", gg_rct_rect1_8)
    call YDTriggerExecuteTrigger(ydl_trigger,false)
    set ydl_trigger = null
endfunction

function Trig_monsterFunc011Conditions takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    set ydl_trigger = gg_trg_MoveRect
    YDLocalExecuteTrigger(ydl_trigger)
    call YDLocal5Set(unit, "unit", YDLocalGet(GetTriggeringTrigger(), unit, "unit"))
    call YDLocal5Set(rect, "rect", gg_rct_rect1_9)
    call YDTriggerExecuteTrigger(ydl_trigger,false)
    set ydl_trigger = null
endfunction

function Trig_monsterActions takes nothing returns nothing
    local timer ydl_timer
    local trigger ydl_trigger
    YDLocalInitialize()
    set ydl_timer = CreateTimer()
    call YDLocalSet(ydl_timer, integer, "i", 0)
    call YDLocalSet(ydl_timer, rect, "rect", YDLocal1Get(rect, "rect"))
    call YDLocalSet(ydl_timer, unit, "unit", YDLocal1Get(unit, "unit"))
    call TimerStart(ydl_timer, 0.50, true, function Trig_monsterFunc001T)
    set ydl_trigger = CreateTrigger()
    call TriggerRegisterEnterRectSimple( ydl_trigger, gg_rct_rect1_1 )
    call TriggerAddCondition(ydl_trigger, Condition(function Trig_monsterFunc002Conditions))
    set ydl_trigger = CreateTrigger()
    call TriggerRegisterEnterRectSimple( ydl_trigger, gg_rct_rect1_2 )
    call TriggerAddCondition(ydl_trigger, Condition(function Trig_monsterFunc003Conditions))
    set ydl_trigger = CreateTrigger()
    call TriggerRegisterEnterRectSimple( ydl_trigger, gg_rct_rect1_3 )
    call TriggerAddCondition(ydl_trigger, Condition(function Trig_monsterFunc004Conditions))
    set ydl_trigger = CreateTrigger()
    call TriggerRegisterEnterRectSimple( ydl_trigger, gg_rct_rect1_4 )
    call TriggerAddCondition(ydl_trigger, Condition(function Trig_monsterFunc005Conditions))
    set ydl_trigger = CreateTrigger()
    call TriggerRegisterEnterRectSimple( ydl_trigger, gg_rct_rect1_5 )
    call TriggerAddCondition(ydl_trigger, Condition(function Trig_monsterFunc006Conditions))
    set ydl_trigger = CreateTrigger()
    call TriggerRegisterEnterRectSimple( ydl_trigger, gg_rct_rect1_5_5 )
    call TriggerAddCondition(ydl_trigger, Condition(function Trig_monsterFunc007Conditions))
    set ydl_trigger = CreateTrigger()
    call TriggerRegisterEnterRectSimple( ydl_trigger, gg_rct_rect1_6 )
    call TriggerAddCondition(ydl_trigger, Condition(function Trig_monsterFunc008Conditions))
    set ydl_trigger = CreateTrigger()
    call TriggerRegisterEnterRectSimple( ydl_trigger, gg_rct_rect1_7 )
    call TriggerAddCondition(ydl_trigger, Condition(function Trig_monsterFunc009Conditions))
    set ydl_trigger = CreateTrigger()
    call TriggerRegisterEnterRectSimple( ydl_trigger, gg_rct_rect1_8 )
    call TriggerAddCondition(ydl_trigger, Condition(function Trig_monsterFunc010Conditions))
    set ydl_trigger = CreateTrigger()
    call TriggerRegisterEnterRectSimple( ydl_trigger, gg_rct_rect1_9 )
    call TriggerAddCondition(ydl_trigger, Condition(function Trig_monsterFunc011Conditions))
    call YDLocal1Release()
    set ydl_timer = null
    set ydl_trigger = null
endfunction

//===========================================================================
function InitTrig_monster takes nothing returns nothing
    set gg_trg_monster = CreateTrigger()
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_monster, "monster")
#endif
    call TriggerRegisterTimerEventSingle( gg_trg_monster, 0.03 )
    call TriggerAddAction(gg_trg_monster, function Trig_monsterActions)
endfunction

//===========================================================================
// Trigger: MoveRect
//
// rect
//===========================================================================
function Trig_MoveRectActions takes nothing returns nothing
    YDLocalInitialize()
    if ((YDUserDataHas(rect, YDLocal1Get(rect, "rect"), "targetRect", rect) == true)) then
        call YDLocal1Set(rect, "targetRect", YDUserDataGet(rect, YDLocal1Get(rect, "rect"), "targetRect", rect))
        call IssuePointOrder( GetTriggerUnit(), "move", GetRectCenterX(YDLocal1Get(rect, "targetRect")), GetRectCenterY(YDLocal1Get(rect, "targetRect")) )
    else
    endif
    call YDLocal1Release()
endfunction

//===========================================================================
function InitTrig_MoveRect takes nothing returns nothing
    set gg_trg_MoveRect = CreateTrigger()
    call DisableTrigger(gg_trg_MoveRect)
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_MoveRect, "MoveRect")
#endif
    call TriggerAddAction(gg_trg_MoveRect, function Trig_MoveRectActions)
endfunction

//===========================================================================
// Trigger: Init
//===========================================================================
function Trig_InitActions takes nothing returns nothing
    call YDUserDataSet(rect, gg_rct_rect1_1, "targetRect", rect, gg_rct_rect1_2)
    call YDUserDataSet(rect, gg_rct_rect1_2, "targetRect", rect, gg_rct_rect1_3)
    call YDUserDataSet(rect, gg_rct_rect1_3, "targetRect", rect, gg_rct_rect1_4)
    call YDUserDataSet(rect, gg_rct_rect1_4, "targetRect", rect, gg_rct_rect1_5)
    call YDUserDataSet(rect, gg_rct_rect1_5, "targetRect", rect, gg_rct_rect1_5_5)
    call YDUserDataSet(rect, gg_rct_rect1_5_5, "targetRect", rect, gg_rct_rect1_6)
    call YDUserDataSet(rect, gg_rct_rect1_6, "targetRect", rect, gg_rct_rect1_7)
    call YDUserDataSet(rect, gg_rct_rect1_7, "targetRect", rect, gg_rct_rect1_8)
    call YDUserDataSet(rect, gg_rct_rect1_8, "targetRect", rect, gg_rct_rect1_9)
    call CreateFogModifierRectBJ( true, Player(0), FOG_OF_WAR_VISIBLE, GetPlayableMapRect() )
endfunction

//===========================================================================
function InitTrig_Init takes nothing returns nothing
    set gg_trg_Init = CreateTrigger()
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_Init, "Init")
#endif
    call TriggerRegisterTimerEventSingle( gg_trg_Init, 0.00 )
    call TriggerAddAction(gg_trg_Init, function Trig_InitActions)
endfunction

//===========================================================================
// Trigger: Camera
//===========================================================================
function Trig_CameraFunc006CT takes nothing returns nothing
    if ((YDUserDataGet(player, GetLocalPlayer(), "重置镜头属性", boolean) == true)) then
        call SetCameraField( CAMERA_FIELD_ANGLE_OF_ATTACK, YDUserDataGet(player, GetLocalPlayer(), "镜头X角度", real), 0.00 )
        call SetCameraField( CAMERA_FIELD_TARGET_DISTANCE, YDUserDataGet(player, GetLocalPlayer(), "镜头距离", real), YDUserDataGet(player, GetLocalPlayer(), "镜头缩放平滑", real) )
        call YDUserDataSet(player, GetLocalPlayer(), "重置镜头属性", boolean, false)
    else
    endif
endfunction

function Trig_CameraFunc011WT takes nothing returns nothing
    if ((DzIsMouseOverUI() == false)) then
        return
    else
    endif
    call YDLocal6Set("Trig_CameraFunc011", integer, "delta", DzGetWheelDelta())
    call YDUserDataSet(player, GetLocalPlayer(), "重置镜头属性", boolean, true)
    if ((YDLocal6Get("Trig_CameraFunc011", integer, "delta") > 0)) then
        if ((YDLocal6Get("Trig_CameraFunc011", integer, "level") > 3)) then
            call YDLocal6Set("Trig_CameraFunc011", integer, "level", ( YDLocal6Get("Trig_CameraFunc011", integer, "level") - 1 ))
        else
        endif
    else
        if ((YDLocal6Get("Trig_CameraFunc011", integer, "level") < 14)) then
            call YDLocal6Set("Trig_CameraFunc011", integer, "level", ( YDLocal6Get("Trig_CameraFunc011", integer, "level") + 1 ))
        else
        endif
    endif
    call YDUserDataSet(player, GetLocalPlayer(), "镜头X角度", real, YDWEDeg2R(Rad2Deg(YDWER2Rad(GetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK)))))
    call YDUserDataSet(player, GetLocalPlayer(), "镜头距离", real, ( I2R(YDLocal6Get("Trig_CameraFunc011", integer, "level")) * 200.00 ))
endfunction

function Trig_CameraActions takes nothing returns nothing
    YDLocalInitialize()
    // 鼠标滚轮控制视距
    // 一键切换宽屏模式
    // made by 裂魂
    // 2018/10/19
    if GetLocalPlayer() == GetLocalPlayer() then
    	call DzFrameSetUpdateCallbackByCode( function Trig_CameraFunc006CT)
    endif
    call YDLocal1Set(integer, "level", 8)
    call YDUserDataSet(player, GetLocalPlayer(), "镜头缩放平滑", real, 0.10)
    call YDUserDataSet(player, GetLocalPlayer(), "镜头距离", real, ( I2R(YDLocal1Get(integer, "level")) * 200.00 ))
    call SetCameraField( CAMERA_FIELD_TARGET_DISTANCE, YDUserDataGet(player, GetLocalPlayer(), "镜头距离", real), YDUserDataGet(player, GetLocalPlayer(), "镜头缩放平滑", real) )
    call YDLocal6Set("Trig_CameraFunc011", integer, "delta", YDLocal1Get(integer, "delta"))
    call YDLocal6Set("Trig_CameraFunc011", integer, "level", YDLocal1Get(integer, "level"))
    if GetLocalPlayer() == GetLocalPlayer() then
    	call DzTriggerRegisterMouseWheelEventByCode( null, false, function Trig_CameraFunc011WT)
    endif
    call YDLocal1Release()
endfunction

//===========================================================================
function InitTrig_Camera takes nothing returns nothing
    set gg_trg_Camera = CreateTrigger()
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_Camera, "Camera")
#endif
    call TriggerAddAction(gg_trg_Camera, function Trig_CameraActions)
endfunction

//===========================================================================
// Trigger: AddXuanYun
//
// unit
// length 眩晕时长
// effStr
//===========================================================================
function Trig_AddXuanYunActions takes nothing returns nothing
    YDLocalInitialize()
    if ((IsUnitInGroup(YDLocal1Get(unit, "unit"), udg_XuanYunGroup) == false)) then
        call YDWEUnitAddStun( YDLocal1Get(unit, "unit") )
        call GroupAddUnit( udg_XuanYunGroup, YDLocal1Get(unit, "unit") )
        if ((YDUserDataHas(unit, YDLocal1Get(unit, "unit"), "xuanYunEff", effect) == true)) then
            call DestroyEffect( YDUserDataGet(unit, YDLocal1Get(unit, "unit"), "xuanYunEff", effect) )
            call YDUserDataClear(unit, YDLocal1Get(unit, "unit"), "xuanYunEff", effect)
        else
        endif
        if ((YDLocal1Get(string, "effStr") != "")) then
            call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "xuanYunEff", effect, AddSpecialEffectTarget(YDLocal1Get(modelfile, "effStr"), YDLocal1Get(unit, "unit"), "overhead"))
        else
        endif
    else
        call YDLocal1Set(integer, "remain", ( YDUserDataGet(unit, YDLocal1Get(unit, "unit"), "xuanYunLength", integer) - YDUserDataGet(unit, YDLocal1Get(unit, "unit"), "xuanYunCount", integer) ))
        if ((YDLocal1Get(integer, "length") >= YDLocal1Get(integer, "remain"))) then
            // 刷新冷却时间
            call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "xuanYunCount", integer, 0)
            call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "xuanYunLength", integer, YDLocal1Get(integer, "length"))
            if ((YDLocal1Get(string, "effStr") != "")) then
                call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "xuanYunEff", effect, AddSpecialEffectTarget(YDLocal1Get(modelfile, "effStr"), YDLocal1Get(unit, "unit"), "overhead"))
            else
            endif
        else
        endif
    endif
    call YDLocal1Release()
endfunction

//===========================================================================
function InitTrig_AddXuanYun takes nothing returns nothing
    set gg_trg_AddXuanYun = CreateTrigger()
    call DisableTrigger(gg_trg_AddXuanYun)
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_AddXuanYun, "AddXuanYun")
#endif
    call TriggerAddAction(gg_trg_AddXuanYun, function Trig_AddXuanYunActions)
endfunction

//===========================================================================
// Trigger: HurtTrigger
//===========================================================================
function Trig_HurtTriggerFunc001Conditions takes nothing returns nothing
    if ((YDUserDataHas(unit, GetTriggerUnit(), "DamageOdds", real) == true)) then
        call YDWESetEventDamage( ( GetEventDamage() * YDUserDataGet(unit, GetTriggerUnit(), "DamageOdds", real) ) )
    else
    endif
endfunction

function Trig_HurtTriggerActions takes nothing returns nothing
    local trigger ydl_trigger
    set ydl_trigger = CreateTrigger()
    call TriggerRegisterUnitEvent( ydl_trigger, gg_unit_h002_0004, EVENT_UNIT_DAMAGED )
    call TriggerAddCondition(ydl_trigger, Condition(function Trig_HurtTriggerFunc001Conditions))
    set ydl_trigger = null
endfunction

//===========================================================================
function InitTrig_HurtTrigger takes nothing returns nothing
    set gg_trg_HurtTrigger = CreateTrigger()
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_HurtTrigger, "HurtTrigger")
#endif
    call TriggerRegisterTimerEventSingle( gg_trg_HurtTrigger, 0.10 )
    call TriggerAddAction(gg_trg_HurtTrigger, function Trig_HurtTriggerActions)
endfunction

//===========================================================================
// Trigger: Test
//===========================================================================
function Trig_TestActions takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    YDLocalInitialize()
    call YDLocal1Set(unit, "unit", gg_unit_h002_0004)
    set ydl_trigger = gg_trg_Clear
    YDLocalExecuteTrigger(ydl_trigger)
    call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
    call YDTriggerExecuteTrigger(ydl_trigger,false)
    if ((GetEventPlayerChatString() == "1")) then
        set ydl_trigger = gg_trg_HuoYuanSu
        YDLocalExecuteTrigger(ydl_trigger)
        call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
        call YDLocal5Set(integer, "level", 1)
        call YDTriggerExecuteTrigger(ydl_trigger,false)
    else
        if ((GetEventPlayerChatString() == "2")) then
            set ydl_trigger = gg_trg_HuoYuanSu
            YDLocalExecuteTrigger(ydl_trigger)
            call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
            call YDLocal5Set(integer, "level", 2)
            call YDTriggerExecuteTrigger(ydl_trigger,false)
        else
            if ((GetEventPlayerChatString() == "3")) then
                set ydl_trigger = gg_trg_RanBao
                YDLocalExecuteTrigger(ydl_trigger)
                call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                call YDLocal5Set(integer, "level", 2)
                call YDTriggerExecuteTrigger(ydl_trigger,false)
            else
                if ((GetEventPlayerChatString() == "4")) then
                    set ydl_trigger = gg_trg_shuiYuanSu
                    YDLocalExecuteTrigger(ydl_trigger)
                    call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                    call YDLocal5Set(integer, "level", 1)
                    call YDTriggerExecuteTrigger(ydl_trigger,false)
                else
                    if ((GetEventPlayerChatString() == "5")) then
                        set ydl_trigger = gg_trg_shuiYuanSu
                        YDLocalExecuteTrigger(ydl_trigger)
                        call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                        call YDLocal5Set(integer, "level", 2)
                        call YDTriggerExecuteTrigger(ydl_trigger,false)
                    else
                        if ((GetEventPlayerChatString() == "6")) then
                            set ydl_trigger = gg_trg_shuiYuanSu
                            YDLocalExecuteTrigger(ydl_trigger)
                            call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                            call YDLocal5Set(integer, "level", 3)
                            call YDTriggerExecuteTrigger(ydl_trigger,false)
                        else
                            if ((GetEventPlayerChatString() == "7")) then
                                set ydl_trigger = gg_trg_leiYuanSu
                                YDLocalExecuteTrigger(ydl_trigger)
                                call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                                call YDLocal5Set(integer, "level", 1)
                                call YDTriggerExecuteTrigger(ydl_trigger,false)
                            else
                                if ((GetEventPlayerChatString() == "8")) then
                                    set ydl_trigger = gg_trg_leiYuanSu
                                    YDLocalExecuteTrigger(ydl_trigger)
                                    call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                                    call YDLocal5Set(integer, "level", 2)
                                    call YDTriggerExecuteTrigger(ydl_trigger,false)
                                else
                                    if ((GetEventPlayerChatString() == "9")) then
                                        set ydl_trigger = gg_trg_leiYuanSu
                                        YDLocalExecuteTrigger(ydl_trigger)
                                        call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                                        call YDLocal5Set(integer, "level", 3)
                                        call YDTriggerExecuteTrigger(ydl_trigger,false)
                                    else
                                        if ((GetEventPlayerChatString() == "10")) then
                                            set ydl_trigger = gg_trg_fengYuanSu
                                            YDLocalExecuteTrigger(ydl_trigger)
                                            call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                                            call YDLocal5Set(integer, "level", 1)
                                            call YDTriggerExecuteTrigger(ydl_trigger,false)
                                        else
                                            if ((GetEventPlayerChatString() == "11")) then
                                                set ydl_trigger = gg_trg_fengYuanSu
                                                YDLocalExecuteTrigger(ydl_trigger)
                                                call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                                                call YDLocal5Set(integer, "level", 2)
                                                call YDTriggerExecuteTrigger(ydl_trigger,false)
                                            else
                                                if ((GetEventPlayerChatString() == "12")) then
                                                    set ydl_trigger = gg_trg_fengYuanSu
                                                    YDLocalExecuteTrigger(ydl_trigger)
                                                    call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                                                    call YDLocal5Set(integer, "level", 3)
                                                    call YDTriggerExecuteTrigger(ydl_trigger,false)
                                                else
                                                    if ((GetEventPlayerChatString() == "13")) then
                                                        set ydl_trigger = gg_trg_leiBao
                                                        YDLocalExecuteTrigger(ydl_trigger)
                                                        call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                                                        call YDLocal5Set(integer, "level", 1)
                                                        call YDTriggerExecuteTrigger(ydl_trigger,false)
                                                    else
                                                        if ((GetEventPlayerChatString() == "14")) then
                                                            set ydl_trigger = gg_trg_leiBao
                                                            YDLocalExecuteTrigger(ydl_trigger)
                                                            call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                                                            call YDLocal5Set(integer, "level", 2)
                                                            call YDTriggerExecuteTrigger(ydl_trigger,false)
                                                        else
                                                            if ((GetEventPlayerChatString() == "15")) then
                                                                set ydl_trigger = gg_trg_zhenFa
                                                                YDLocalExecuteTrigger(ydl_trigger)
                                                                call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                                                                call YDLocal5Set(integer, "level", 1)
                                                                call YDTriggerExecuteTrigger(ydl_trigger,false)
                                                            else
                                                                if ((GetEventPlayerChatString() == "16")) then
                                                                    set ydl_trigger = gg_trg_zhenFa
                                                                    YDLocalExecuteTrigger(ydl_trigger)
                                                                    call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                                                                    call YDLocal5Set(integer, "level", 2)
                                                                    call YDTriggerExecuteTrigger(ydl_trigger,false)
                                                                else
                                                                    if ((GetEventPlayerChatString() == "17")) then
                                                                        set ydl_trigger = gg_trg_zhenFa
                                                                        YDLocalExecuteTrigger(ydl_trigger)
                                                                        call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                                                                        call YDLocal5Set(integer, "level", 3)
                                                                        call YDTriggerExecuteTrigger(ydl_trigger,false)
                                                                    else
                                                                        if ((GetEventPlayerChatString() == "18")) then
                                                                            set ydl_trigger = gg_trg_shaoShang
                                                                            YDLocalExecuteTrigger(ydl_trigger)
                                                                            call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                                                                            call YDTriggerExecuteTrigger(ydl_trigger,false)
                                                                        else
                                                                            if ((GetEventPlayerChatString() == "19")) then
                                                                                set ydl_trigger = gg_trg_dongShang
                                                                                YDLocalExecuteTrigger(ydl_trigger)
                                                                                call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                                                                                call YDTriggerExecuteTrigger(ydl_trigger,false)
                                                                            else
                                                                                if ((GetEventPlayerChatString() == "20")) then
                                                                                    set ydl_trigger = gg_trg_hanleng
                                                                                    YDLocalExecuteTrigger(ydl_trigger)
                                                                                    call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                                                                                    call YDLocal5Set(integer, "level", 1)
                                                                                    call YDTriggerExecuteTrigger(ydl_trigger,false)
                                                                                else
                                                                                    if ((GetEventPlayerChatString() == "21")) then
                                                                                        set ydl_trigger = gg_trg_ronghua
                                                                                        YDLocalExecuteTrigger(ydl_trigger)
                                                                                        call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                                                                                        call YDTriggerExecuteTrigger(ydl_trigger,false)
                                                                                    else
                                                                                        if ((GetEventPlayerChatString() == "22")) then
                                                                                            set ydl_trigger = gg_trg_huifu
                                                                                            YDLocalExecuteTrigger(ydl_trigger)
                                                                                            call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                                                                                            call YDTriggerExecuteTrigger(ydl_trigger,false)
                                                                                        else
                                                                                            if ((GetEventPlayerChatString() == "23")) then
                                                                                                set ydl_trigger = gg_trg_chaoDao
                                                                                                YDLocalExecuteTrigger(ydl_trigger)
                                                                                                call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                                                                                                call YDLocal5Set(integer, "level", 1)
                                                                                                call YDTriggerExecuteTrigger(ydl_trigger,false)
                                                                                            else
                                                                                                if ((GetEventPlayerChatString() == "24")) then
                                                                                                    set ydl_trigger = gg_trg_chaoZai
                                                                                                    YDLocalExecuteTrigger(ydl_trigger)
                                                                                                    call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                                                                                                    call YDTriggerExecuteTrigger(ydl_trigger,false)
                                                                                                else
                                                                                                    if ((GetEventPlayerChatString() == "25")) then
                                                                                                        set ydl_trigger = gg_trg_fengLeiJian
                                                                                                        YDLocalExecuteTrigger(ydl_trigger)
                                                                                                        call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
                                                                                                        call YDLocal5Set(integer, "level", 1)
                                                                                                        call YDTriggerExecuteTrigger(ydl_trigger,false)
                                                                                                    else
                                                                                                    endif
                                                                                                endif
                                                                                            endif
                                                                                        endif
                                                                                    endif
                                                                                endif
                                                                            endif
                                                                        endif
                                                                    endif
                                                                endif
                                                            endif
                                                        endif
                                                    endif
                                                endif
                                            endif
                                        endif
                                    endif
                                endif
                            endif
                        endif
                    endif
                endif
            endif
        endif
    endif
    call YDLocal1Release()
    set ydl_trigger = null
endfunction

//===========================================================================
function InitTrig_Test takes nothing returns nothing
    set gg_trg_Test = CreateTrigger()
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_Test, "Test")
#endif
    call TriggerRegisterPlayerChatEvent( gg_trg_Test, Player(0), "", true )
    call TriggerAddAction(gg_trg_Test, function Trig_TestActions)
endfunction

//===========================================================================
// Trigger: Clock
//===========================================================================
function Trig_ClockFunc001Func001A takes nothing returns nothing
    if ((IsUnitType(GetEnumUnit(), UNIT_TYPE_DEAD) == false)) then
        if ((YDUserDataHas(unit, GetEnumUnit(), "xuanYunCount", integer) == true)) then
            call YDUserDataSet(unit, GetEnumUnit(), "xuanYunCount", integer, ( YDUserDataGet(unit, GetEnumUnit(), "xuanYunCount", integer) + 1 ))
        else
            call YDUserDataSet(unit, GetEnumUnit(), "xuanYunCount", integer, 1)
        endif
        if ((YDUserDataGet(unit, GetEnumUnit(), "xuanYunCount", integer) >= YDUserDataGet(unit, GetEnumUnit(), "xuanYunLength", integer))) then
            if ((YDUserDataHas(unit, GetEnumUnit(), "xuanYunEff", effect) == true)) then
                call DestroyEffect( YDUserDataGet(unit, GetEnumUnit(), "xuanYunEff", effect) )
                call YDUserDataClear(unit, GetEnumUnit(), "xuanYunEff", effect)
            else
            endif
            call YDWEUnitRemoveStun( GetEnumUnit() )
            call GroupRemoveUnit( udg_XuanYunGroup, GetEnumUnit() )
        else
        endif
    else
    endif
endfunction

function Trig_ClockFunc001Func002A takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    if ((IsUnitType(GetEnumUnit(), UNIT_TYPE_DEAD) == false)) then
        if ((YDUserDataHas(unit, GetEnumUnit(), "thunderCount", integer) == true)) then
            call YDUserDataSet(unit, GetEnumUnit(), "thunderCount", integer, ( YDUserDataGet(unit, GetEnumUnit(), "thunderCount", integer) + 1 ))
        else
            call BJDebugMsg( "ThunderGroup逻辑有误" )
        endif
        set ydl_trigger = gg_trg_HurtCenter
        YDLocalExecuteTrigger(ydl_trigger)
        call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
        call YDLocal5Set(unit, "unit2", GetEnumUnit())
        call YDLocal5Set(real, "damage", ( ( GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) * 0.01 ) * YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A006', "DataC3") ))
        call YDLocal5Set(integer, "type", 1)
        call YDTriggerExecuteTrigger(ydl_trigger,false)
        if ((YDUserDataGet(unit, GetEnumUnit(), "thunderCount", integer) == ( YDWEGetObjectPropertyInteger(YDWE_OBJECT_TYPE_ABILITY, 'A006', "Dur3") * 2 ))) then
            if ((YDUserDataHas(unit, GetEnumUnit(), "thunderEff", effect) == true)) then
                call DestroyEffect( YDUserDataGet(unit, GetEnumUnit(), "thunderEff", effect) )
                call YDUserDataClear(unit, GetEnumUnit(), "thunderEff", effect)
            else
            endif
            call GroupRemoveUnit( udg_ThunderGroup3, GetEnumUnit() )
        else
        endif
    else
    endif
    set ydl_trigger = null
endfunction

function Trig_ClockFunc001Func003Func001Func003003003 takes nothing returns boolean
    return (((IsUnitType(GetFilterUnit(), UNIT_TYPE_DEAD) == false) and (GetPlayerController(GetOwningPlayer(GetFilterUnit())) == MAP_CONTROL_COMPUTER)))
endfunction

function Trig_ClockFunc001Func003Func001Func004A takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    set ydl_trigger = gg_trg_HurtCenter
    YDLocalExecuteTrigger(ydl_trigger)
    call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
    call YDLocal5Set(unit, "unit2", GetEnumUnit())
    call YDLocal5Set(real, "damage", ( ( GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) * 0.01 ) * YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A00E', "DataB1") ))
    call YDLocal5Set(integer, "type", 1)
    call YDTriggerExecuteTrigger(ydl_trigger,false)
    set ydl_trigger = null
endfunction

function Trig_ClockFunc001Func003A takes nothing returns nothing
    local group ydl_group
    local unit ydl_unit
    local integer ydl_triggerstep
    local trigger ydl_trigger
    if ((IsUnitType(GetEnumUnit(), UNIT_TYPE_DEAD) == false)) then
        if ((YDUserDataHas(unit, GetEnumUnit(), "count", integer) == true)) then
            call YDUserDataSet(unit, GetEnumUnit(), "count", integer, ( YDUserDataGet(unit, GetEnumUnit(), "count", integer) + 1 ))
        else
            call BJDebugMsg( "FengLeiJianGroup逻辑有误" )
        endif
        call YDLocalSet(GetExpiredTimer(), location, "p", GetUnitLoc(GetEnumUnit()))
        call YDLocalSet(GetExpiredTimer(), group, "g", GetUnitsInRangeOfLocMatching(200.00, YDLocalGet(GetExpiredTimer(), location, "p"), Condition(function Trig_ClockFunc001Func003Func001Func003003003)))
        call ForGroupBJ( YDLocalGet(GetExpiredTimer(), group, "g"), function Trig_ClockFunc001Func003Func001Func004A )
        call DestroyGroup( YDLocalGet(GetExpiredTimer(), group, "g") )
        call RemoveLocation( YDLocalGet(GetExpiredTimer(), location, "p") )
        if ((YDUserDataGet(unit, GetEnumUnit(), "count", integer) == 10)) then
            call GroupRemoveUnit( udg_FengLeiJianGroup, GetEnumUnit() )
            call KillUnit( GetEnumUnit() )
        else
        endif
    else
    endif
    set ydl_group = null
    set ydl_unit = null
    set ydl_trigger = null
endfunction

function Trig_ClockFunc001T takes nothing returns nothing
    local group ydl_group
    local unit ydl_unit
    local integer ydl_triggerstep
    local trigger ydl_trigger
    call ForGroupBJ( udg_XuanYunGroup, function Trig_ClockFunc001Func001A )
    call ForGroupBJ( udg_ThunderGroup3, function Trig_ClockFunc001Func002A )
    call ForGroupBJ( udg_FengLeiJianGroup, function Trig_ClockFunc001Func003A )
    set ydl_group = null
    set ydl_unit = null
    set ydl_trigger = null
endfunction

function Trig_ClockFunc002Func001A takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    if ((IsUnitType(GetEnumUnit(), UNIT_TYPE_DEAD) == false)) then
        if ((YDUserDataHas(unit, GetEnumUnit(), "huoYanSuCount", integer) == true)) then
            call YDUserDataSet(unit, GetEnumUnit(), "huoYanSuCount", integer, ( YDUserDataGet(unit, GetEnumUnit(), "huoYanSuCount", integer) + 1 ))
        else
            call YDUserDataSet(unit, GetEnumUnit(), "huoYanSuCount", integer, 1)
        endif
        if ((YDUserDataGet(unit, GetEnumUnit(), "HYSLevel", integer) == 1)) then
            call YDLocalSet(GetExpiredTimer(), integer, "len", YDWEGetObjectPropertyInteger(YDWE_OBJECT_TYPE_ABILITY, 'A002', "Dur1"))
            set ydl_trigger = gg_trg_HurtCenter
            YDLocalExecuteTrigger(ydl_trigger)
            call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
            call YDLocal5Set(unit, "unit2", GetEnumUnit())
            call YDLocal5Set(real, "damage", ( ( GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) * 0.01 ) * YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A002', "DataA1") ))
            call YDLocal5Set(integer, "type", 1)
            call YDTriggerExecuteTrigger(ydl_trigger,false)
        else
            if ((YDUserDataGet(unit, GetEnumUnit(), "HYSLevel", integer) == 2)) then
                call YDLocalSet(GetExpiredTimer(), integer, "len", YDWEGetObjectPropertyInteger(YDWE_OBJECT_TYPE_ABILITY, 'A002', "Dur2"))
                set ydl_trigger = gg_trg_HurtCenter
                YDLocalExecuteTrigger(ydl_trigger)
                call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
                call YDLocal5Set(unit, "unit2", GetEnumUnit())
                call YDLocal5Set(real, "damage", ( ( GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) * 0.01 ) * YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A002', "DataA2") ))
                call YDLocal5Set(integer, "type", 1)
                call YDTriggerExecuteTrigger(ydl_trigger,false)
            else
            endif
        endif
        if ((YDUserDataGet(unit, GetEnumUnit(), "huoYanSuCount", integer) >= YDLocalGet(GetExpiredTimer(), integer, "len"))) then
            if ((YDUserDataHas(unit, GetEnumUnit(), "huoYanEff", effect) == true)) then
                call DestroyEffect( YDUserDataGet(unit, GetEnumUnit(), "huoYanEff", effect) )
                call YDUserDataClear(unit, GetEnumUnit(), "huoYanEff", effect)
            else
            endif
            call GroupRemoveUnit( udg_HuoYuanSuGroup, GetEnumUnit() )
        else
        endif
    else
    endif
    set ydl_trigger = null
endfunction

function Trig_ClockFunc002Func002A takes nothing returns nothing
    if ((IsUnitType(GetEnumUnit(), UNIT_TYPE_DEAD) == false)) then
        if ((YDUserDataHas(unit, GetEnumUnit(), "shuiYuanSuCount", integer) == true)) then
            call YDUserDataSet(unit, GetEnumUnit(), "shuiYuanSuCount", integer, ( YDUserDataGet(unit, GetEnumUnit(), "shuiYuanSuCount", integer) + 1 ))
        else
            call YDUserDataSet(unit, GetEnumUnit(), "shuiYuanSuCount", integer, 1)
        endif
        if ((YDUserDataGet(unit, GetEnumUnit(), "SYSLevel", integer) == 1)) then
            call YDLocalSet(GetExpiredTimer(), integer, "len", YDWEGetObjectPropertyInteger(YDWE_OBJECT_TYPE_ABILITY, 'A004', "Dur1"))
        else
            if ((YDUserDataGet(unit, GetEnumUnit(), "SYSLevel", integer) == 2)) then
                call YDLocalSet(GetExpiredTimer(), integer, "len", YDWEGetObjectPropertyInteger(YDWE_OBJECT_TYPE_ABILITY, 'A004', "Dur2"))
            else
            endif
        endif
        if ((YDUserDataGet(unit, GetEnumUnit(), "shuiYuanSuCount", integer) >= YDLocalGet(GetExpiredTimer(), integer, "len"))) then
            call SetUnitMoveSpeed( GetEnumUnit(), GetUnitDefaultMoveSpeed(GetEnumUnit()) )
            call SetUnitVertexColor( YDLocalGet(GetExpiredTimer(), unit, "unit"), 255, 255, 255, 255 )
            call GroupRemoveUnit( udg_ShuiYuanSuGroup, GetEnumUnit() )
        else
        endif
    else
    endif
endfunction

function Trig_ClockFunc002Func003A takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    if ((IsUnitType(GetEnumUnit(), UNIT_TYPE_DEAD) == false)) then
        if ((YDUserDataHas(unit, GetEnumUnit(), "thunderCount", integer) == true)) then
            call YDUserDataSet(unit, GetEnumUnit(), "thunderCount", integer, ( YDUserDataGet(unit, GetEnumUnit(), "thunderCount", integer) + 1 ))
        else
            call YDUserDataSet(unit, GetEnumUnit(), "thunderCount", integer, 1)
        endif
        if ((YDUserDataGet(unit, GetEnumUnit(), "LYSLevel", integer) == 1)) then
            call YDLocalSet(GetExpiredTimer(), integer, "len", YDWEGetObjectPropertyInteger(YDWE_OBJECT_TYPE_ABILITY, 'A006', "Dur1"))
            call YDLocalSet(GetExpiredTimer(), integer, "len2", YDWEGetObjectPropertyInteger(YDWE_OBJECT_TYPE_ABILITY, 'A006', "DataA1"))
            set ydl_trigger = gg_trg_HurtCenter
            YDLocalExecuteTrigger(ydl_trigger)
            call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
            call YDLocal5Set(unit, "unit2", GetEnumUnit())
            call YDLocal5Set(real, "damage", ( ( GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) * 0.01 ) * YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A006', "DataC1") ))
            call YDLocal5Set(integer, "type", 1)
            call YDTriggerExecuteTrigger(ydl_trigger,false)
        else
            if ((YDUserDataGet(unit, GetEnumUnit(), "LYSLevel", integer) == 2)) then
                call YDLocalSet(GetExpiredTimer(), integer, "len", YDWEGetObjectPropertyInteger(YDWE_OBJECT_TYPE_ABILITY, 'A006', "Dur2"))
                call YDLocalSet(GetExpiredTimer(), integer, "len2", YDWEGetObjectPropertyInteger(YDWE_OBJECT_TYPE_ABILITY, 'A006', "DataA2"))
                set ydl_trigger = gg_trg_HurtCenter
                YDLocalExecuteTrigger(ydl_trigger)
                call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
                call YDLocal5Set(unit, "unit2", GetEnumUnit())
                call YDLocal5Set(real, "damage", ( ( GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) * 0.01 ) * YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A006', "DataC2") ))
                call YDLocal5Set(integer, "type", 1)
                call YDTriggerExecuteTrigger(ydl_trigger,false)
            else
                call BJDebugMsg( "ThunderGroup逻辑有误" )
            endif
        endif
        if ((YDUserDataGet(unit, GetEnumUnit(), "thunderCount", integer) == YDLocalGet(GetExpiredTimer(), integer, "len2"))) then
            set ydl_trigger = gg_trg_AddXuanYun
            YDLocalExecuteTrigger(ydl_trigger)
            call YDLocal5Set(unit, "unit", GetEnumUnit())
            call YDLocal5Set(integer, "length", 1)
            call YDLocal5Set(string, "effStr", "Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl")
            call YDTriggerExecuteTrigger(ydl_trigger,false)
        else
        endif
        if ((YDUserDataGet(unit, GetEnumUnit(), "thunderCount", integer) == YDLocalGet(GetExpiredTimer(), integer, "len"))) then
            if ((YDUserDataHas(unit, GetEnumUnit(), "thunderEff", effect) == true)) then
                call DestroyEffect( YDUserDataGet(unit, GetEnumUnit(), "thunderEff", effect) )
                call YDUserDataClear(unit, GetEnumUnit(), "thunderEff", effect)
            else
            endif
            call GroupRemoveUnit( udg_ThunderGroup, GetEnumUnit() )
        else
        endif
    else
    endif
    set ydl_trigger = null
endfunction

function Trig_ClockFunc002Func005A takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    if ((IsUnitType(GetEnumUnit(), UNIT_TYPE_DEAD) == false)) then
        if ((YDUserDataHas(unit, GetEnumUnit(), "FYSCount", integer) == true)) then
            call YDUserDataSet(unit, GetEnumUnit(), "FYSCount", integer, ( YDUserDataGet(unit, GetEnumUnit(), "FYSCount", integer) + 1 ))
        else
            call YDUserDataSet(unit, GetEnumUnit(), "FYSCount", integer, 1)
        endif
        if ((YDUserDataGet(unit, GetEnumUnit(), "FYSLevel", integer) == 1)) then
            call YDLocalSet(GetExpiredTimer(), integer, "len", YDWEGetObjectPropertyInteger(YDWE_OBJECT_TYPE_ABILITY, 'A005', "Dur1"))
            set ydl_trigger = gg_trg_HurtCenter
            YDLocalExecuteTrigger(ydl_trigger)
            call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
            call YDLocal5Set(unit, "unit2", GetEnumUnit())
            call YDLocal5Set(real, "damage", ( ( GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) * 0.01 ) * YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A005', "DataB1") ))
            call YDLocal5Set(integer, "type", 1)
            call YDTriggerExecuteTrigger(ydl_trigger,false)
        else
            if ((YDUserDataGet(unit, GetEnumUnit(), "FYSLevel", integer) == 2)) then
                call YDLocalSet(GetExpiredTimer(), integer, "len", YDWEGetObjectPropertyInteger(YDWE_OBJECT_TYPE_ABILITY, 'A005', "Dur2"))
                set ydl_trigger = gg_trg_HurtCenter
                YDLocalExecuteTrigger(ydl_trigger)
                call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
                call YDLocal5Set(unit, "unit2", GetEnumUnit())
                call YDLocal5Set(real, "damage", ( ( GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) * 0.01 ) * YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A005', "DataB2") ))
                call YDLocal5Set(integer, "type", 1)
                call YDTriggerExecuteTrigger(ydl_trigger,false)
            else
                if ((YDUserDataGet(unit, GetEnumUnit(), "FYSLevel", integer) == 3)) then
                    call YDLocalSet(GetExpiredTimer(), integer, "len", YDWEGetObjectPropertyInteger(YDWE_OBJECT_TYPE_ABILITY, 'A005', "Dur3"))
                    set ydl_trigger = gg_trg_HurtCenter
                    YDLocalExecuteTrigger(ydl_trigger)
                    call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
                    call YDLocal5Set(unit, "unit2", GetEnumUnit())
                    call YDLocal5Set(real, "damage", ( ( GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) * 0.01 ) * YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A005', "DataB3") ))
                    call YDLocal5Set(integer, "type", 1)
                    call YDTriggerExecuteTrigger(ydl_trigger,false)
                else
                    call BJDebugMsg( "逻辑有误！" )
                endif
            endif
        endif
        if ((YDUserDataGet(unit, GetEnumUnit(), "FYSCount", integer) >= YDLocalGet(GetExpiredTimer(), integer, "len"))) then
            if ((YDUserDataHas(unit, GetEnumUnit(), "FYSEff", effect) == true)) then
                call DestroyEffect( YDUserDataGet(unit, GetEnumUnit(), "FYSEff", effect) )
                call YDUserDataClear(unit, GetEnumUnit(), "FYSEff", effect)
            else
            endif
            call GroupRemoveUnit( udg_FengYuanSuGroup, GetEnumUnit() )
            call YDUserDataClear(unit, GetEnumUnit(), "FSYCount", integer)
            call YDUserDataClear(unit, GetEnumUnit(), "FYSLevel", integer)
        else
        endif
    else
    endif
    set ydl_trigger = null
endfunction

function Trig_ClockFunc002Func007A takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    if ((IsUnitType(GetEnumUnit(), UNIT_TYPE_DEAD) == false)) then
        if ((YDUserDataHas(unit, GetEnumUnit(), "HLCount", integer) == true)) then
            call YDUserDataSet(unit, GetEnumUnit(), "HLCount", integer, ( YDUserDataGet(unit, GetEnumUnit(), "HLCount", integer) + 1 ))
        else
            call YDUserDataSet(unit, GetEnumUnit(), "HLCount", integer, 1)
        endif
        call YDWETimerDestroyEffect( 2, AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", GetEnumUnit(), "origin") )
        if ((YDUserDataGet(unit, GetEnumUnit(), "HLLevel", integer) == 1)) then
            call YDLocalSet(GetExpiredTimer(), integer, "len", YDWEGetObjectPropertyInteger(YDWE_OBJECT_TYPE_ABILITY, 'A009', "Dur1"))
            set ydl_trigger = gg_trg_HurtCenter
            YDLocalExecuteTrigger(ydl_trigger)
            call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
            call YDLocal5Set(unit, "unit2", GetEnumUnit())
            call YDLocal5Set(real, "damage", ( ( GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) * 0.01 ) * YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A009', "DataA1") ))
            call YDLocal5Set(integer, "type", 1)
            call YDTriggerExecuteTrigger(ydl_trigger,false)
        else
            if ((YDUserDataGet(unit, GetEnumUnit(), "HLLevel", integer) == 2)) then
                call YDLocalSet(GetExpiredTimer(), integer, "len", YDWEGetObjectPropertyInteger(YDWE_OBJECT_TYPE_ABILITY, 'A009', "Dur2"))
                set ydl_trigger = gg_trg_HurtCenter
                YDLocalExecuteTrigger(ydl_trigger)
                call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
                call YDLocal5Set(unit, "unit2", GetEnumUnit())
                call YDLocal5Set(real, "damage", ( ( GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) * 0.01 ) * YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A009', "DataA2") ))
                call YDLocal5Set(integer, "type", 1)
                call YDTriggerExecuteTrigger(ydl_trigger,false)
            else
                if ((YDUserDataGet(unit, GetEnumUnit(), "HLLevel", integer) == 3)) then
                    call YDLocalSet(GetExpiredTimer(), integer, "len", YDWEGetObjectPropertyInteger(YDWE_OBJECT_TYPE_ABILITY, 'A009', "Dur3"))
                    set ydl_trigger = gg_trg_HurtCenter
                    YDLocalExecuteTrigger(ydl_trigger)
                    call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
                    call YDLocal5Set(unit, "unit2", GetEnumUnit())
                    call YDLocal5Set(real, "damage", ( ( GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) * 0.01 ) * YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A009', "DataA3") ))
                    call YDLocal5Set(integer, "type", 1)
                    call YDTriggerExecuteTrigger(ydl_trigger,false)
                else
                    call BJDebugMsg( "逻辑有误！" )
                endif
            endif
        endif
        if ((YDUserDataGet(unit, GetEnumUnit(), "HLCount", integer) >= YDLocalGet(GetExpiredTimer(), integer, "len"))) then
            call GroupRemoveUnit( udg_HLGroup, GetEnumUnit() )
            call YDUserDataClear(unit, GetEnumUnit(), "HLCount", integer)
            call YDUserDataClear(unit, GetEnumUnit(), "HLLevel", integer)
        else
        endif
    else
    endif
    set ydl_trigger = null
endfunction

function Trig_ClockFunc002Func008A takes nothing returns nothing
    if ((IsUnitType(GetEnumUnit(), UNIT_TYPE_DEAD) == false)) then
        if ((YDUserDataHas(unit, GetEnumUnit(), "HFCount", integer) == true)) then
            call YDUserDataSet(unit, GetEnumUnit(), "HFCount", integer, ( YDUserDataGet(unit, GetEnumUnit(), "HFCount", integer) + 1 ))
        else
            call YDUserDataSet(unit, GetEnumUnit(), "HFCount", integer, 1)
        endif
        call YDLocalSet(GetExpiredTimer(), integer, "len", YDWEGetObjectPropertyInteger(YDWE_OBJECT_TYPE_ABILITY, 'A00B', "Dur1"))
        call SetUnitState( GetEnumUnit(), UNIT_STATE_LIFE, ( ( GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) * 0.02 ) + GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE) ) )
        if ((YDUserDataGet(unit, GetEnumUnit(), "HFCount", integer) >= YDLocalGet(GetExpiredTimer(), integer, "len"))) then
            if ((YDUserDataHas(unit, GetEnumUnit(), "huiFuEff", effect) == true)) then
                call DestroyEffect( YDUserDataGet(unit, GetEnumUnit(), "huiFuEff", effect) )
                call YDUserDataClear(unit, GetEnumUnit(), "huiFuEff", effect)
            else
            endif
            call YDUserDataClear(unit, GetEnumUnit(), "HFCount", integer)
            call GroupRemoveUnit( udg_HuiFuGroup, GetEnumUnit() )
        else
        endif
    else
    endif
endfunction

function Trig_ClockFunc002T takes nothing returns nothing
    local group ydl_group
    local unit ydl_unit
    local integer ydl_triggerstep
    local trigger ydl_trigger
    call ForGroupBJ( udg_HuoYuanSuGroup, function Trig_ClockFunc002Func001A )
    call ForGroupBJ( udg_ShuiYuanSuGroup, function Trig_ClockFunc002Func002A )
    call ForGroupBJ( udg_ThunderGroup, function Trig_ClockFunc002Func003A )
    // 风元素
    call ForGroupBJ( udg_FengYuanSuGroup, function Trig_ClockFunc002Func005A )
    // 寒冷
    call ForGroupBJ( udg_HLGroup, function Trig_ClockFunc002Func007A )
    call ForGroupBJ( udg_HuiFuGroup, function Trig_ClockFunc002Func008A )
    set ydl_group = null
    set ydl_unit = null
    set ydl_trigger = null
endfunction

function Trig_ClockActions takes nothing returns nothing
    local timer ydl_timer
    set ydl_timer = CreateTimer()
    call YDLocalSet(ydl_timer, group, "g", YDLocal2Get(group, "g"))
    call YDLocalSet(ydl_timer, location, "p", YDLocal2Get(location, "p"))
    call TimerStart(ydl_timer, 0.50, true, function Trig_ClockFunc001T)
    set ydl_timer = CreateTimer()
    call YDLocalSet(ydl_timer, integer, "len", YDLocal2Get(integer, "len"))
    call YDLocalSet(ydl_timer, integer, "len2", YDLocal2Get(integer, "len2"))
    call YDLocalSet(ydl_timer, unit, "unit", YDLocal2Get(unit, "unit"))
    call TimerStart(ydl_timer, 1.00, true, function Trig_ClockFunc002T)
    set ydl_timer = null
endfunction

//===========================================================================
function InitTrig_Clock takes nothing returns nothing
    set gg_trg_Clock = CreateTrigger()
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_Clock, "Clock")
#endif
    call TriggerRegisterTimerEventSingle( gg_trg_Clock, 0.10 )
    call TriggerAddAction(gg_trg_Clock, function Trig_ClockActions)
endfunction

//===========================================================================
// Trigger: Damage
//===========================================================================
function Trig_DamageFunc001Func006Func001Func006Func001Func006T takes nothing returns nothing
    if ((YDLocalGet(GetExpiredTimer(), real, "r") <= 0.00)) then
        call YDLocalSet(GetExpiredTimer(), integer, "i", 0)
        call YDLocalSet(GetExpiredTimer(), real, "r", 0.00)
        call YDLocalSet(GetExpiredTimer(), unit, "u", null)
        call YDLocal3Release()
        call DestroyTimer(GetExpiredTimer())
    else
        call YDLocalSet(GetExpiredTimer(), real, "r", OperatorRealSubtract(YDLocalGet(GetExpiredTimer(), real, "r"), 0.50))
        call SetTextTagPosUnit( YDLocalGet(GetExpiredTimer(), texttag, "c"), YDLocalGet(GetExpiredTimer(), unit, "u"), 15.00 )
        call SetTextTagTextBJ( YDLocalGet(GetExpiredTimer(), texttag, "c"), I2S(YDLocalGet(GetExpiredTimer(), integer, "i")), YDLocalGet(GetExpiredTimer(), real, "r") )
        call SetTextTagVelocityBJ( YDLocalGet(GetExpiredTimer(), texttag, "c"), 0.00, 90.00 )
        call SetTextTagColorBJ( YDLocalGet(GetExpiredTimer(), texttag, "c"), 100, 60.00, 0.00, 0 )
    endif
endfunction

function Trig_DamageFunc001Func006Func001Func006T takes nothing returns nothing
    local timer ydl_timer
    if ((YDLocalGet(GetExpiredTimer(), real, "r") >= 20.00)) then
        set ydl_timer = CreateTimer()
        call YDLocalSet(ydl_timer, real, "r", 20.00)
        call YDLocalSet(ydl_timer, unit, "u", YDLocalGet(GetExpiredTimer(), unit, "u"))
        call YDLocalSet(ydl_timer, texttag, "c", YDLocalGet(GetExpiredTimer(), texttag, "c"))
        call YDLocalSet(ydl_timer, integer, "i", YDLocalGet(GetExpiredTimer(), integer, "i"))
        call TimerStart(ydl_timer, 0.01, true, function Trig_DamageFunc001Func006Func001Func006Func001Func006T)
        call YDLocal3Release()
        call DestroyTimer(GetExpiredTimer())
    else
        call YDLocalSet(GetExpiredTimer(), real, "r", OperatorRealAdd(YDLocalGet(GetExpiredTimer(), real, "r"), 0.50))
        call SetTextTagPosUnit( YDLocalGet(GetExpiredTimer(), texttag, "c"), YDLocalGet(GetExpiredTimer(), unit, "u"), 15.00 )
        call SetTextTagTextBJ( YDLocalGet(GetExpiredTimer(), texttag, "c"), I2S(YDLocalGet(GetExpiredTimer(), integer, "i")), YDLocalGet(GetExpiredTimer(), real, "r") )
        call SetTextTagVelocityBJ( YDLocalGet(GetExpiredTimer(), texttag, "c"), 50.00, 90.00 )
        call SetTextTagColorBJ( YDLocalGet(GetExpiredTimer(), texttag, "c"), 100, 60.00, 0.00, 0 )
    endif
    set ydl_timer = null
endfunction

function Trig_DamageActions takes nothing returns nothing
    local timer ydl_timer
    YDLocalInitialize()
    if ((GetPlayerController(GetOwningPlayer(GetEventDamageSource())) == MAP_CONTROL_USER)) then
        call YDLocal1Set(real, "s", GetEventDamage())
        call YDLocal1Set(unit, "u", GetTriggerUnit())
        call YDLocal1Set(unit, "n", GetEventDamageSource())
        if ((YDLocal1Get(real, "s") > 1.00)) then
            call YDLocal1Set(integer, "i", R2I(YDLocal1Get(real, "s")))
            call YDLocal1Set(texttag, "c", CreateTextTag())
            call YDWETimerDestroyTextTag( 1.00, YDLocal1Get(texttag, "c") )
            set ydl_timer = CreateTimer()
            call YDLocalSet(ydl_timer, real, "r", 0.00)
            call YDLocalSet(ydl_timer, texttag, "c", YDLocal1Get(texttag, "c"))
            call YDLocalSet(ydl_timer, integer, "i", YDLocal1Get(integer, "i"))
            call YDLocalSet(ydl_timer, unit, "u", YDLocal1Get(unit, "u"))
            call TimerStart(ydl_timer, 0.01, true, function Trig_DamageFunc001Func006Func001Func006T)
        else
            call DoNothing(  )
        endif
        call YDLocal1Set(unit, "u", null)
        call YDLocal1Set(unit, "n", null)
    else
        call DoNothing(  )
    endif
    call YDLocal1Release()
    set ydl_timer = null
endfunction

//===========================================================================
function InitTrig_Damage takes nothing returns nothing
    set gg_trg_Damage = CreateTrigger()
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_Damage, "Damage")
#endif
    call YDWESyStemAnyUnitDamagedRegistTrigger( gg_trg_Damage )
    call TriggerAddAction(gg_trg_Damage, function Trig_DamageActions)
endfunction

//===========================================================================
// Trigger: HurtCenter
//
// type == 1 物理伤害 计算护甲
// type == 2 魔法伤害 计算魔抗
// type == 3 真实伤害 
// unit 伤害源
// unit2 伤害目标
// damage 伤害值（非最终伤害）实数
//===========================================================================
function Trig_HurtCenterActions takes nothing returns nothing
    YDLocalInitialize()
    // 真实伤害
    if ((YDLocal1Get(integer, "type") == 1)) then
        call UnitDamageTarget( YDLocal1Get(unit, "unit"), YDLocal1Get(unit, "unit2"), YDLocal1Get(real, "damage"), false, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNIVERSAL, WEAPON_TYPE_WHOKNOWS )
    else
        // 物理伤害
        if ((YDLocal1Get(integer, "type") == 2)) then
            call UnitDamageTarget( YDLocal1Get(unit, "unit"), YDLocal1Get(unit, "unit2"), YDLocal1Get(real, "damage"), false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS )
        else
            // 魔法伤害
            if ((YDLocal1Get(integer, "type") == 3)) then
                call UnitDamageTarget( YDLocal1Get(unit, "unit"), YDLocal1Get(unit, "unit2"), YDLocal1Get(real, "damage"), false, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS )
            else
            endif
        endif
    endif
    call YDLocal1Release()
endfunction

//===========================================================================
function InitTrig_HurtCenter takes nothing returns nothing
    set gg_trg_HurtCenter = CreateTrigger()
    call DisableTrigger(gg_trg_HurtCenter)
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_HurtCenter, "HurtCenter")
#endif
    call TriggerAddAction(gg_trg_HurtCenter, function Trig_HurtCenterActions)
endfunction

//===========================================================================
// Trigger: CheckXieLou
//===========================================================================
function Trig_CheckXieLouActions takes nothing returns nothing
    call DisplayTextToPlayer( Player(0), 0, 0, "------------YDWE Leak Monitor------------" )
    call DisplayTextToPlayer( Player(0), 0, 0, ( "|cff00FF00location|r: " + I2S(GetLocalizedHotkey("yd_leak_monitor::location")) ) )
    call DisplayTextToPlayer( Player(0), 0, 0, ( "|cff00FF00effect  |r: " + I2S(GetLocalizedHotkey("yd_leak_monitor::effect")) ) )
    call DisplayTextToPlayer( Player(0), 0, 0, ( "|cff00FF00group   |r: " + I2S(GetLocalizedHotkey("yd_leak_monitor::group")) ) )
    call DisplayTextToPlayer( Player(0), 0, 0, ( "|cff00FF00region  |r: " + I2S(GetLocalizedHotkey("yd_leak_monitor::region")) ) )
    call DisplayTextToPlayer( Player(0), 0, 0, ( "|cff00FF00rect    |r: " + I2S(GetLocalizedHotkey("yd_leak_monitor::rect")) ) )
    call DisplayTextToPlayer( Player(0), 0, 0, ( "|cff00FF00force   |r: " + I2S(GetLocalizedHotkey("yd_leak_monitor::force")) ) )
    call DisplayTextToPlayer( Player(0), 0, 0, "-----------------------------------------" )
endfunction

//===========================================================================
function InitTrig_CheckXieLou takes nothing returns nothing
    set gg_trg_CheckXieLou = CreateTrigger()
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_CheckXieLou, "CheckXieLou")
#endif
    call TriggerRegisterPlayerKeyEventBJ( gg_trg_CheckXieLou, Player(0), bj_KEYEVENTTYPE_DEPRESS, bj_KEYEVENTKEY_LEFT )
    call TriggerAddAction(gg_trg_CheckXieLou, function Trig_CheckXieLouActions)
endfunction

//===========================================================================
// Trigger: DeadEvent
//===========================================================================
function Trig_DeadEventActions takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    YDLocalInitialize()
    call YDLocal1Set(unit, "unit", GetTriggerUnit())
    set ydl_trigger = gg_trg_Clear
    YDLocalExecuteTrigger(ydl_trigger)
    call YDLocal5Set(unit, "unit", YDLocal1Get(unit, "unit"))
    call YDTriggerExecuteTrigger(ydl_trigger,false)
    call YDLocal1Release()
    set ydl_trigger = null
endfunction

//===========================================================================
function InitTrig_DeadEvent takes nothing returns nothing
    set gg_trg_DeadEvent = CreateTrigger()
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_DeadEvent, "DeadEvent")
#endif
    call TriggerRegisterAnyUnitEventBJ( gg_trg_DeadEvent, EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddAction(gg_trg_DeadEvent, function Trig_DeadEventActions)
endfunction

//===========================================================================
// Trigger: Clear
//===========================================================================
function Trig_ClearActions takes nothing returns nothing
    YDLocalInitialize()
    if ((IsUnitInGroup(YDLocal1Get(unit, "unit"), udg_FengLeiJianGroup) == true)) then
        call GroupRemoveUnit( udg_FengLeiJianGroup, YDLocal1Get(unit, "unit") )
    else
    endif
    if ((IsUnitInGroup(YDLocal1Get(unit, "unit"), udg_FengYuanSuGroup) == true)) then
        call GroupRemoveUnit( udg_FengYuanSuGroup, YDLocal1Get(unit, "unit") )
    else
    endif
    if ((IsUnitInGroup(YDLocal1Get(unit, "unit"), udg_HLGroup) == true)) then
        call GroupRemoveUnit( udg_HLGroup, YDLocal1Get(unit, "unit") )
    else
    endif
    if ((IsUnitInGroup(YDLocal1Get(unit, "unit"), udg_HuiFuGroup) == true)) then
        call GroupRemoveUnit( udg_HuiFuGroup, YDLocal1Get(unit, "unit") )
    else
    endif
    if ((IsUnitInGroup(YDLocal1Get(unit, "unit"), udg_HuoYuanSuGroup) == true)) then
        call GroupRemoveUnit( udg_HuoYuanSuGroup, YDLocal1Get(unit, "unit") )
    else
    endif
    if ((IsUnitInGroup(YDLocal1Get(unit, "unit"), udg_ShuiYuanSuGroup) == true)) then
        call GroupRemoveUnit( udg_ShuiYuanSuGroup, YDLocal1Get(unit, "unit") )
    else
    endif
    if ((IsUnitInGroup(YDLocal1Get(unit, "unit"), udg_ThunderGroup) == true)) then
        call GroupRemoveUnit( udg_ThunderGroup, YDLocal1Get(unit, "unit") )
    else
    endif
    if ((IsUnitInGroup(YDLocal1Get(unit, "unit"), udg_ThunderGroup3) == true)) then
        call GroupRemoveUnit( udg_ThunderGroup3, YDLocal1Get(unit, "unit") )
    else
    endif
    if ((IsUnitInGroup(YDLocal1Get(unit, "unit"), udg_XuanYunGroup) == true)) then
        call GroupRemoveUnit( udg_XuanYunGroup, YDLocal1Get(unit, "unit") )
    else
    endif
    if ((YDUserDataHas(unit, YDLocal1Get(unit, "unit"), "huoYanEff", effect) == true)) then
        call DestroyEffect( YDUserDataGet(unit, YDLocal1Get(unit, "unit"), "huoYanEff", effect) )
        call YDUserDataClear(unit, YDLocal1Get(unit, "unit"), "huoYanEff", effect)
    else
    endif
    if ((YDUserDataHas(unit, YDLocal1Get(unit, "unit"), "thunderEff", effect) == true)) then
        call DestroyEffect( YDUserDataGet(unit, YDLocal1Get(unit, "unit"), "thunderEff", effect) )
        call YDUserDataClear(unit, YDLocal1Get(unit, "unit"), "thunderEff", effect)
    else
    endif
    if ((YDUserDataHas(unit, YDLocal1Get(unit, "unit"), "FYSEff", effect) == true)) then
        call DestroyEffect( YDUserDataGet(unit, YDLocal1Get(unit, "unit"), "FYSEff", effect) )
        call YDUserDataClear(unit, YDLocal1Get(unit, "unit"), "FYSEff", effect)
    else
    endif
    if ((YDUserDataHas(unit, YDLocal1Get(unit, "unit"), "huiFuEff", effect) == true)) then
        call DestroyEffect( YDUserDataGet(unit, YDLocal1Get(unit, "unit"), "huiFuEff", effect) )
        call YDUserDataClear(unit, YDLocal1Get(unit, "unit"), "huiFuEff", effect)
    else
    endif
    call YDUserDataClearTable(unit, YDLocal1Get(unit, "unit"))
    call YDLocal1Release()
endfunction

//===========================================================================
function InitTrig_Clear takes nothing returns nothing
    set gg_trg_Clear = CreateTrigger()
    call DisableTrigger(gg_trg_Clear)
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_Clear, "Clear")
#endif
    call TriggerAddAction(gg_trg_Clear, function Trig_ClearActions)
endfunction

//===========================================================================
// Trigger: HuoYuanSu
//
// unit
// level
//===========================================================================
function Trig_HuoYuanSuActions takes nothing returns nothing
    YDLocalInitialize()
    call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "HYSLevel", integer, YDLocal1Get(integer, "level"))
    if ((YDLocal1Get(integer, "level") == 1)) then
        call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "huoYanSuCount", integer, 0)
        if ((YDUserDataHas(unit, YDLocal1Get(unit, "unit"), "huoYanEff", effect) == false)) then
            call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "huoYanEff", effect, AddSpecialEffectTarget("Environment\\NightElfBuildingFire\\ElfSmallBuildingFire1.mdl", YDLocal1Get(unit, "unit"), "head"))
        else
        endif
    else
        if ((YDLocal1Get(integer, "level") == 2)) then
            call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "huoYanSuCount", integer, 0)
            if ((YDUserDataHas(unit, YDLocal1Get(unit, "unit"), "huoYanEff2", effect) == false)) then
                call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "huoYanEff", effect, AddSpecialEffectTarget("Environment\\NightElfBuildingFire\\ElfLargeBuildingFire0.mdl", YDLocal1Get(unit, "unit"), "head"))
            else
                call BJDebugMsg( ( "HuoYuanSu" + "--逻辑有误！" ) )
            endif
        else
        endif
    endif
    if ((IsUnitInGroup(YDLocal1Get(unit, "unit"), udg_HuoYuanSuGroup) == false)) then
        call GroupAddUnit( udg_HuoYuanSuGroup, YDLocal1Get(unit, "unit") )
    else
    endif
    call YDLocal1Release()
endfunction

//===========================================================================
function InitTrig_HuoYuanSu takes nothing returns nothing
    set gg_trg_HuoYuanSu = CreateTrigger()
    call DisableTrigger(gg_trg_HuoYuanSu)
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_HuoYuanSu, "HuoYuanSu")
#endif
    call TriggerAddAction(gg_trg_HuoYuanSu, function Trig_HuoYuanSuActions)
endfunction

//===========================================================================
// Trigger: RanBao
//===========================================================================
function Trig_RanBaoActions takes nothing returns nothing
    local group ydl_group
    local unit ydl_unit
    local integer ydl_triggerstep
    local trigger ydl_trigger
    YDLocalInitialize()
    call YDLocal1Set(effect, "eff", AddSpecialEffect("war3mapImported\\194.mdl", GetUnitX(YDLocal1Get(unit, "unit")), GetUnitY(YDLocal1Get(unit, "unit"))))
    call EXSetEffectSize( YDLocal1Get(effect, "eff"), 1.50 )
    call YDWETimerDestroyEffect( 3.00, YDLocal1Get(effect, "eff") )
    set ydl_group = CreateGroup()
    call GroupEnumUnitsInRange(ydl_group, GetUnitX(YDLocal1Get(unit, "unit")), GetUnitY(YDLocal1Get(unit, "unit")), 300.00, null)
    loop
        set ydl_unit = FirstOfGroup(ydl_group)
        exitwhen ydl_unit == null
        call GroupRemoveUnit(ydl_group, ydl_unit)
        set ydl_trigger = gg_trg_HurtCenter
        YDLocalExecuteTrigger(ydl_trigger)
        call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
        call YDLocal5Set(unit, "unit2", ydl_unit)
        call YDLocal5Set(real, "damage", ( ( GetUnitState(ydl_unit, UNIT_STATE_MAX_LIFE) * 0.01 ) * YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A003', "DataA1") ))
        call YDLocal5Set(integer, "type", 1)
        call YDTriggerExecuteTrigger(ydl_trigger,false)
    endloop
    call DestroyGroup(ydl_group)
    call YDLocal1Release()
    set ydl_group = null
    set ydl_unit = null
    set ydl_trigger = null
endfunction

//===========================================================================
function InitTrig_RanBao takes nothing returns nothing
    set gg_trg_RanBao = CreateTrigger()
    call DisableTrigger(gg_trg_RanBao)
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_RanBao, "RanBao")
#endif
    call TriggerAddAction(gg_trg_RanBao, function Trig_RanBaoActions)
endfunction

//===========================================================================
// Trigger: shuiYuanSu
//
// unit
// level
//===========================================================================
function Trig_shuiYuanSuFunc001Func001Func002T takes nothing returns nothing
    call SetUnitVertexColor( YDLocalGet(GetExpiredTimer(), unit, "unit"), 80, 80, 255, 255 )
    call PauseUnit( YDLocalGet(GetExpiredTimer(), unit, "unit"), true )
    call YDLocal3Release()
    call DestroyTimer(GetExpiredTimer())
endfunction

function Trig_shuiYuanSuFunc001Func001Func003T takes nothing returns nothing
    call DestroyEffect( YDUserDataGet(unit, YDLocalGet(GetExpiredTimer(), unit, "unit"), "shuiYuanSuEff3", effect) )
    call YDUserDataClear(unit, YDLocalGet(GetExpiredTimer(), unit, "unit"), "shuiYuanSuEff3", effect)
    call PauseUnit( YDLocalGet(GetExpiredTimer(), unit, "unit"), false )
    call YDLocal3Release()
    call DestroyTimer(GetExpiredTimer())
endfunction

function Trig_shuiYuanSuActions takes nothing returns nothing
    local timer ydl_timer
    YDLocalInitialize()
    if ((YDLocal1Get(integer, "level") == 3)) then
        if ((YDUserDataHas(unit, YDLocal1Get(unit, "unit"), "shuiYuanSuEff3", effect) == false)) then
            call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "shuiYuanSuEff3", effect, AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathTargetArt.mdl", YDLocal1Get(unit, "unit"), "origin"))
            set ydl_timer = CreateTimer()
            call YDLocalSet(ydl_timer, unit, "unit", YDLocal1Get(unit, "unit"))
            call TimerStart(ydl_timer, 0.50, false, function Trig_shuiYuanSuFunc001Func001Func002T)
            set ydl_timer = CreateTimer()
            call YDLocalSet(ydl_timer, unit, "unit", YDLocal1Get(unit, "unit"))
            call TimerStart(ydl_timer, YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A004', "Dur3"), false, function Trig_shuiYuanSuFunc001Func001Func003T)
        else
        endif
    else
        call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "SYSLevel", integer, YDLocal1Get(integer, "level"))
        if ((YDLocal1Get(integer, "level") == 1)) then
            call SetUnitMoveSpeed( YDLocal1Get(unit, "unit"), ( GetUnitDefaultMoveSpeed(YDLocal1Get(unit, "unit")) * ( 1.00 - ( YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A004', "DataA1") * 0.01 ) ) ) )
            call SetUnitVertexColor( YDLocal1Get(unit, "unit"), 150, 150, 255, 255 )
        else
            if ((YDLocal1Get(integer, "level") == 2)) then
                call SetUnitMoveSpeed( YDLocal1Get(unit, "unit"), ( GetUnitDefaultMoveSpeed(YDLocal1Get(unit, "unit")) * ( 1.00 - ( YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A004', "DataA2") * 0.01 ) ) ) )
                call SetUnitVertexColor( YDLocal1Get(unit, "unit"), 100, 100, 255, 255 )
            else
                call BJDebugMsg( ( "shuiYuanSu" + "--逻辑有误！" ) )
            endif
        endif
        call GroupAddUnit( udg_ShuiYuanSuGroup, YDLocal1Get(unit, "unit") )
        call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "shuiYuanSuCount", integer, 0)
    endif
    call YDLocal1Release()
    set ydl_timer = null
endfunction

//===========================================================================
function InitTrig_shuiYuanSu takes nothing returns nothing
    set gg_trg_shuiYuanSu = CreateTrigger()
    call DisableTrigger(gg_trg_shuiYuanSu)
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_shuiYuanSu, "shuiYuanSu")
#endif
    call TriggerAddAction(gg_trg_shuiYuanSu, function Trig_shuiYuanSuActions)
endfunction

//===========================================================================
// Trigger: leiYuanSu
//
// unit
// level
//===========================================================================
function Trig_leiYuanSuActions takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    YDLocalInitialize()
    if ((YDLocal1Get(integer, "level") == 3)) then
        call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "thunderEff", effect, AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl", YDLocal1Get(unit, "unit"), "origin"))
        call YDLocal1Set(effect, "eff", AddSpecialEffect("war3mapImported\\[TX] (630).mdx", GetUnitX(YDLocal1Get(unit, "unit")), GetUnitY(YDLocal1Get(unit, "unit"))))
        call YDWETimerDestroyEffect( 3.00, YDLocal1Get(effect, "eff") )
        if ((IsUnitInGroup(YDLocal1Get(unit, "unit"), udg_ThunderGroup3) == false)) then
            call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "thunderCount", integer, 0)
            call GroupAddUnit( udg_ThunderGroup3, YDLocal1Get(unit, "unit") )
            set ydl_trigger = gg_trg_AddXuanYun
            YDLocalExecuteTrigger(ydl_trigger)
            call YDLocal5Set(unit, "unit", GetEnumUnit())
            call YDLocal5Set(integer, "length", 6)
            call YDLocal5Set(string, "effStr", "Abilities\\Spells\\Human\\Thunderclap\\ThunderclapTarget.mdl")
            call YDTriggerExecuteTrigger(ydl_trigger,false)
        else
        endif
    else
        call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "thunderCount", integer, 0)
        call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "LYSLevel", integer, YDLocal1Get(integer, "level"))
        call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "thunderEff", effect, AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl", YDLocal1Get(unit, "unit"), "origin"))
        if ((IsUnitInGroup(YDLocal1Get(unit, "unit"), udg_ThunderGroup) == false)) then
            call GroupAddUnit( udg_ThunderGroup, YDLocal1Get(unit, "unit") )
        else
        endif
    endif
    call YDLocal1Release()
    set ydl_trigger = null
endfunction

//===========================================================================
function InitTrig_leiYuanSu takes nothing returns nothing
    set gg_trg_leiYuanSu = CreateTrigger()
    call DisableTrigger(gg_trg_leiYuanSu)
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_leiYuanSu, "leiYuanSu")
#endif
    call TriggerAddAction(gg_trg_leiYuanSu, function Trig_leiYuanSuActions)
endfunction

//===========================================================================
// Trigger: fengYuanSu
//
// unit
// level
//===========================================================================
function Trig_fengYuanSuActions takes nothing returns nothing
    YDLocalInitialize()
    call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "FYSLevel", integer, YDLocal1Get(integer, "level"))
    if ((YDLocal1Get(integer, "level") == 1)) then
        call SetUnitMoveSpeed( YDLocal1Get(unit, "unit"), ( GetUnitDefaultMoveSpeed(YDLocal1Get(unit, "unit")) * ( 1.00 - ( YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A005', "DataA1") * 0.01 ) ) ) )
    else
        if ((YDLocal1Get(integer, "level") == 2)) then
            call SetUnitMoveSpeed( YDLocal1Get(unit, "unit"), ( GetUnitDefaultMoveSpeed(YDLocal1Get(unit, "unit")) * ( 1.00 - ( YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A005', "DataA2") * 0.01 ) ) ) )
        else
            if ((YDLocal1Get(integer, "level") == 3)) then
                call SetUnitMoveSpeed( YDLocal1Get(unit, "unit"), ( GetUnitDefaultMoveSpeed(YDLocal1Get(unit, "unit")) * ( 1.00 - ( YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A005', "DataA3") * 0.01 ) ) ) )
            else
            endif
        endif
    endif
    if ((IsUnitInGroup(YDLocal1Get(unit, "unit"), udg_FengYuanSuGroup) == false)) then
        if ((YDUserDataHas(unit, YDLocal1Get(unit, "unit"), "FYSEff", effect) == false)) then
            call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "FYSEff", effect, AddSpecialEffectTarget("war3mapImported\\[TX] (556).mdl", YDLocal1Get(unit, "unit"), "origin"))
        else
        endif
        call GroupAddUnit( udg_FengYuanSuGroup, YDLocal1Get(unit, "unit") )
    else
    endif
    call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "FYSCount", integer, 0)
    call YDLocal1Release()
endfunction

//===========================================================================
function InitTrig_fengYuanSu takes nothing returns nothing
    set gg_trg_fengYuanSu = CreateTrigger()
    call DisableTrigger(gg_trg_fengYuanSu)
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_fengYuanSu, "fengYuanSu")
#endif
    call TriggerAddAction(gg_trg_fengYuanSu, function Trig_fengYuanSuActions)
endfunction

//===========================================================================
// Trigger: leiBao
//
// unit
// level
//===========================================================================
function Trig_leiBaoActions takes nothing returns nothing
    local group ydl_group
    local unit ydl_unit
    local integer ydl_triggerstep
    local trigger ydl_trigger
    YDLocalInitialize()
    if ((YDLocal1Get(integer, "level") == 1)) then
        call YDLocal1Set(effect, "eff", AddSpecialEffect("war3mapImported\\[TX] (656).mdl", GetUnitX(YDLocal1Get(unit, "unit")), GetUnitY(YDLocal1Get(unit, "unit"))))
        call EXSetEffectSize( YDLocal1Get(effect, "eff"), 1.00 )
        call YDWETimerDestroyEffect( 2.00, YDLocal1Get(effect, "eff") )
        set ydl_group = CreateGroup()
        call GroupEnumUnitsInRange(ydl_group, GetUnitX(YDLocal1Get(unit, "unit")), GetUnitX(YDLocal1Get(unit, "unit")), YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A007', "Area1"), null)
        loop
            set ydl_unit = FirstOfGroup(ydl_group)
            exitwhen ydl_unit == null
            call GroupRemoveUnit(ydl_group, ydl_unit)
            if ((IsUnitType(ydl_unit, UNIT_TYPE_DEAD) == false) and (GetPlayerController(GetOwningPlayer(ydl_unit)) == MAP_CONTROL_COMPUTER)) then
                set ydl_trigger = gg_trg_HurtCenter
                YDLocalExecuteTrigger(ydl_trigger)
                call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
                call YDLocal5Set(unit, "unit2", ydl_unit)
                call YDLocal5Set(real, "damage", ( GetUnitState(ydl_unit, UNIT_STATE_MAX_LIFE) * ( YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A007', "DataA1") * 0.01 ) ))
                call YDLocal5Set(integer, "type", 1)
                call YDTriggerExecuteTrigger(ydl_trigger,false)
            else
            endif
        endloop
        call DestroyGroup(ydl_group)
    else
        if ((YDLocal1Get(integer, "level") == 2)) then
            call YDLocal1Set(effect, "eff", AddSpecialEffect("war3mapImported\\[TX] (656).mdl", GetUnitX(YDLocal1Get(unit, "unit")), GetUnitY(YDLocal1Get(unit, "unit"))))
            call EXSetEffectSize( YDLocal1Get(effect, "eff"), 1.00 )
            call YDWETimerDestroyEffect( 2.00, YDLocal1Get(effect, "eff") )
            set ydl_group = CreateGroup()
            call GroupEnumUnitsInRange(ydl_group, GetUnitX(YDLocal1Get(unit, "unit")), GetUnitX(YDLocal1Get(unit, "unit")), YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A007', "Area2"), null)
            loop
                set ydl_unit = FirstOfGroup(ydl_group)
                exitwhen ydl_unit == null
                call GroupRemoveUnit(ydl_group, ydl_unit)
                if ((IsUnitType(ydl_unit, UNIT_TYPE_DEAD) == false) and (GetPlayerController(GetOwningPlayer(ydl_unit)) == MAP_CONTROL_COMPUTER)) then
                    set ydl_trigger = gg_trg_HurtCenter
                    YDLocalExecuteTrigger(ydl_trigger)
                    call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
                    call YDLocal5Set(unit, "unit2", ydl_unit)
                    call YDLocal5Set(real, "damage", ( GetUnitState(ydl_unit, UNIT_STATE_MAX_LIFE) * ( YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A007', "DataA2") * 0.01 ) ))
                    call YDLocal5Set(integer, "type", 1)
                    call YDTriggerExecuteTrigger(ydl_trigger,false)
                else
                endif
            endloop
            call DestroyGroup(ydl_group)
        else
        endif
    endif
    call YDLocal1Release()
    set ydl_group = null
    set ydl_unit = null
    set ydl_trigger = null
endfunction

//===========================================================================
function InitTrig_leiBao takes nothing returns nothing
    set gg_trg_leiBao = CreateTrigger()
    call DisableTrigger(gg_trg_leiBao)
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_leiBao, "leiBao")
#endif
    call TriggerAddAction(gg_trg_leiBao, function Trig_leiBaoActions)
endfunction

//===========================================================================
// Trigger: zhenFa
//
// unit
// level
//===========================================================================
function Trig_zhenFaActions takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    YDLocalInitialize()
    call YDWETimerDestroyEffect( 2, AddSpecialEffectTarget("war3mapImported\\[TX] (189).mdl", YDLocal1Get(unit, "unit"), "origin") )
    if ((YDLocal1Get(integer, "level") == 1)) then
        set ydl_trigger = gg_trg_HurtCenter
        YDLocalExecuteTrigger(ydl_trigger)
        call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
        call YDLocal5Set(unit, "unit2", YDLocal1Get(unit, "unit"))
        call YDLocal5Set(real, "damage", ( GetUnitState(YDLocal1Get(unit, "unit"), UNIT_STATE_MAX_LIFE) * ( YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A008', "DataA1") * 0.01 ) ))
        call YDLocal5Set(integer, "type", 1)
        call YDTriggerExecuteTrigger(ydl_trigger,false)
    else
        if ((YDLocal1Get(integer, "level") == 2)) then
            set ydl_trigger = gg_trg_HurtCenter
            YDLocalExecuteTrigger(ydl_trigger)
            call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
            call YDLocal5Set(unit, "unit2", YDLocal1Get(unit, "unit"))
            call YDLocal5Set(real, "damage", ( GetUnitState(YDLocal1Get(unit, "unit"), UNIT_STATE_MAX_LIFE) * ( YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A008', "DataA2") * 0.01 ) ))
            call YDLocal5Set(integer, "type", 1)
            call YDTriggerExecuteTrigger(ydl_trigger,false)
        else
            if ((YDLocal1Get(integer, "level") == 3)) then
                set ydl_trigger = gg_trg_HurtCenter
                YDLocalExecuteTrigger(ydl_trigger)
                call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
                call YDLocal5Set(unit, "unit2", YDLocal1Get(unit, "unit"))
                call YDLocal5Set(real, "damage", ( GetUnitState(YDLocal1Get(unit, "unit"), UNIT_STATE_MAX_LIFE) * ( YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A008', "DataA3") * 0.01 ) ))
                call YDLocal5Set(integer, "type", 1)
                call YDTriggerExecuteTrigger(ydl_trigger,false)
            else
            endif
        endif
    endif
    call YDLocal1Release()
    set ydl_trigger = null
endfunction

//===========================================================================
function InitTrig_zhenFa takes nothing returns nothing
    set gg_trg_zhenFa = CreateTrigger()
    call DisableTrigger(gg_trg_zhenFa)
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_zhenFa, "zhenFa")
#endif
    call TriggerAddAction(gg_trg_zhenFa, function Trig_zhenFaActions)
endfunction

//===========================================================================
// Trigger: shaoShang
//===========================================================================
function Trig_shaoShangActions takes nothing returns nothing
    YDLocalInitialize()
    call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "DamageOdds", real, 1.30)
    call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "shaoShangEff", effect, AddSpecialEffectTarget("Abilities\\Spells\\Other\\SoulBurn\\SoulBurnbuff.mdl", YDLocal1Get(unit, "unit"), "head"))
    call YDLocal1Release()
endfunction

//===========================================================================
function InitTrig_shaoShang takes nothing returns nothing
    set gg_trg_shaoShang = CreateTrigger()
    call DisableTrigger(gg_trg_shaoShang)
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_shaoShang, "shaoShang")
#endif
    call TriggerAddAction(gg_trg_shaoShang, function Trig_shaoShangActions)
endfunction

//===========================================================================
// Trigger: dongShang
//===========================================================================
function Trig_dongShangActions takes nothing returns nothing
    YDLocalInitialize()
    call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "DamageOdds", real, 1.30)
    call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "shaoShangEff", effect, AddSpecialEffectTarget("Abilities\\Spells\\Other\\SoulBurn\\SoulBurnbuff.mdl", YDLocal1Get(unit, "unit"), "head"))
    call YDLocal1Release()
endfunction

//===========================================================================
function InitTrig_dongShang takes nothing returns nothing
    set gg_trg_dongShang = CreateTrigger()
    call DisableTrigger(gg_trg_dongShang)
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_dongShang, "dongShang")
#endif
    call TriggerAddAction(gg_trg_dongShang, function Trig_dongShangActions)
endfunction

//===========================================================================
// Trigger: hanleng
//
// level
//===========================================================================
function Trig_hanlengActions takes nothing returns nothing
    YDLocalInitialize()
    call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "HLLevel", integer, YDLocal1Get(integer, "level"))
    call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "HLCount", integer, 0)
    if ((IsUnitInGroup(YDLocal1Get(unit, "unit"), udg_HLGroup) == false)) then
        call GroupAddUnit( udg_HLGroup, YDLocal1Get(unit, "unit") )
    else
    endif
    call YDLocal1Release()
endfunction

//===========================================================================
function InitTrig_hanleng takes nothing returns nothing
    set gg_trg_hanleng = CreateTrigger()
    call DisableTrigger(gg_trg_hanleng)
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_hanleng, "hanleng")
#endif
    call TriggerAddAction(gg_trg_hanleng, function Trig_hanlengActions)
endfunction

//===========================================================================
// Trigger: ronghua
//===========================================================================
function Trig_ronghuaActions takes nothing returns nothing
    YDLocalInitialize()
    if ((GetUnitLifePercent(YDLocal1Get(unit, "unit")) <= YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A00A', "DataA1"))) then
        call KillUnit( YDLocal1Get(unit, "unit") )
    else
    endif
    call YDLocal1Release()
endfunction

//===========================================================================
function InitTrig_ronghua takes nothing returns nothing
    set gg_trg_ronghua = CreateTrigger()
    call DisableTrigger(gg_trg_ronghua)
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_ronghua, "ronghua")
#endif
    call TriggerAddAction(gg_trg_ronghua, function Trig_ronghuaActions)
endfunction

//===========================================================================
// Trigger: huifu
//===========================================================================
function Trig_huifuActions takes nothing returns nothing
    YDLocalInitialize()
    call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "HFCount", integer, 0)
    if ((IsUnitInGroup(YDLocal1Get(unit, "unit"), udg_HuiFuGroup) == false)) then
        if ((YDUserDataHas(unit, YDLocal1Get(unit, "unit"), "huiFuEff", effect) == false)) then
            call YDUserDataSet(unit, YDLocal1Get(unit, "unit"), "huiFuEff", effect, AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Rejuvenation\\RejuvenationTarget.mdl", YDLocal1Get(unit, "unit"), "origin"))
        else
        endif
        call GroupAddUnit( udg_HuiFuGroup, YDLocal1Get(unit, "unit") )
    else
    endif
    call YDLocal1Release()
endfunction

//===========================================================================
function InitTrig_huifu takes nothing returns nothing
    set gg_trg_huifu = CreateTrigger()
    call DisableTrigger(gg_trg_huifu)
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_huifu, "huifu")
#endif
    call TriggerAddAction(gg_trg_huifu, function Trig_huifuActions)
endfunction

//===========================================================================
// Trigger: chaoDao
//===========================================================================
function Trig_chaoDaoActions takes nothing returns nothing
    local integer ydl_triggerstep
    local trigger ydl_trigger
    YDLocalInitialize()
    call YDWETimerDestroyEffect( 2, AddSpecialEffectTarget("war3mapImported\\[TX] (20).mdl", YDLocal1Get(unit, "unit"), "origin") )
    if ((YDLocal1Get(integer, "level") == 1)) then
        set ydl_trigger = gg_trg_HurtCenter
        YDLocalExecuteTrigger(ydl_trigger)
        call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
        call YDLocal5Set(unit, "unit2", YDLocal1Get(unit, "unit"))
        call YDLocal5Set(real, "damage", ( GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) * ( YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A00C', "DataA1") * 0.01 ) ))
        call YDLocal5Set(integer, "type", 1)
        call YDTriggerExecuteTrigger(ydl_trigger,false)
    else
        if ((YDLocal1Get(integer, "level") == 2)) then
            set ydl_trigger = gg_trg_HurtCenter
            YDLocalExecuteTrigger(ydl_trigger)
            call YDLocal5Set(unit, "unit", gg_unit_h001_0002)
            call YDLocal5Set(unit, "unit2", YDLocal1Get(unit, "unit"))
            call YDLocal5Set(real, "damage", ( GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) * ( YDWEGetObjectPropertyReal(YDWE_OBJECT_TYPE_ABILITY, 'A00C', "DataA2") * 0.01 ) ))
            call YDLocal5Set(integer, "type", 1)
            call YDTriggerExecuteTrigger(ydl_trigger,false)
        else
            call BJDebugMsg( ( "chaoDao" + "--逻辑有误！" ) )
        endif
    endif
    call YDLocal1Release()
    set ydl_trigger = null
endfunction

//===========================================================================
function InitTrig_chaoDao takes nothing returns nothing
    set gg_trg_chaoDao = CreateTrigger()
    call DisableTrigger(gg_trg_chaoDao)
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_chaoDao, "chaoDao")
#endif
    call TriggerAddAction(gg_trg_chaoDao, function Trig_chaoDaoActions)
endfunction

//===========================================================================
// Trigger: chaoZai
//===========================================================================
function Trig_chaoZaiActions takes nothing returns nothing
    YDLocalInitialize()
    call IssueTargetOrder( gg_unit_h001_0002, "chainlightning", YDLocal1Get(unit, "unit") )
    call YDLocal1Release()
endfunction

//===========================================================================
function InitTrig_chaoZai takes nothing returns nothing
    set gg_trg_chaoZai = CreateTrigger()
    call DisableTrigger(gg_trg_chaoZai)
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_chaoZai, "chaoZai")
#endif
    call TriggerAddAction(gg_trg_chaoZai, function Trig_chaoZaiActions)
endfunction

//===========================================================================
// Trigger: fengLeiJian
//
// unit
// level
//===========================================================================
function Trig_fengLeiJianActions takes nothing returns nothing
    YDLocalInitialize()
    if ((YDLocal1Get(integer, "level") == 1)) then
        call YDLocal1Set(integer, "max", YDWEGetObjectPropertyInteger(YDWE_OBJECT_TYPE_ABILITY, 'A00E', "DataA1"))
    else
        if ((YDLocal1Get(integer, "level") == 2)) then
            call YDLocal1Set(integer, "max", YDWEGetObjectPropertyInteger(YDWE_OBJECT_TYPE_ABILITY, 'A00E', "DataA2"))
        else
            if ((YDLocal1Get(integer, "level") == 3)) then
                call YDLocal1Set(integer, "max", YDWEGetObjectPropertyInteger(YDWE_OBJECT_TYPE_ABILITY, 'A00E', "DataA3"))
            else
            endif
        endif
    endif
    call YDLocal1Set(integer, "max", 100)
    if ((GetRandomInt(1, 100) <= YDLocal1Get(integer, "max"))) then
        call YDLocal1Set(location, "p", GetUnitLoc(YDLocal1Get(unit, "unit")))
        call YDLocal1Set(unit, "maJia", CreateUnit(Player(0), 'h003', GetUnitX(YDLocal1Get(unit, "unit")), GetUnitY(YDLocal1Get(unit, "unit")), 0))
        call YDUserDataSet(unit, YDLocal1Get(unit, "maJia"), "count", integer, 0)
        call RemoveLocation( YDLocal1Get(location, "p") )
        call GroupAddUnit( udg_FengLeiJianGroup, YDLocal1Get(unit, "maJia") )
    else
    endif
    call YDLocal1Release()
endfunction

//===========================================================================
function InitTrig_fengLeiJian takes nothing returns nothing
    set gg_trg_fengLeiJian = CreateTrigger()
    call DisableTrigger(gg_trg_fengLeiJian)
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_fengLeiJian, "fengLeiJian")
#endif
    call TriggerAddAction(gg_trg_fengLeiJian, function Trig_fengLeiJianActions)
endfunction

//===========================================================================
// Trigger: UIInit
//===========================================================================
function Trig_UIInitActions takes nothing returns nothing
    YDLocalInitialize()
    call YDLocal1Set(frame, "panel", DzCreateFrameByTagName("BACKDROP", "name", DzGetGameUI(), "UI_Top_Frame", 0))
    call DzFrameSetPoint( YDLocal1Get(frame, "panel"), 1, DzGetGameUI(), 1, 0.00, 0.00 )
    call DzFrameSetSize( YDLocal1Get(frame, "panel"), 0.06, 0.05 )
    set udg_WaveTxt = DzCreateFrameByTagName("TEXT", "name", YDLocal1Get(frame, "panel"), "text012", 0)
    call DzFrameSetPoint( udg_WaveTxt, 1, YDLocal1Get(frame, "panel"), 1, 0.00, -0.008 )
    call DzFrameSetFont( udg_WaveTxt, "fonts.ttf", 0.015, 0 )
    call DzFrameSetText( udg_WaveTxt, "|Cff4DFF4D准备阶段|r" )
    set udg_TimeTxt = DzCreateFrameByTagName("TEXT", "name", YDLocal1Get(frame, "panel"), "text012", 0)
    call DzFrameSetFont( udg_TimeTxt, "fonts.ttf", 0.015, 0 )
    call DzFrameSetPoint( udg_TimeTxt, 1, YDLocal1Get(frame, "panel"), 1, 0.00, -0.026 )
    call DzFrameSetText( udg_TimeTxt, "|CffFFC92660|r" )
    call YDLocal1Release()
endfunction

//===========================================================================
function InitTrig_UIInit takes nothing returns nothing
    set gg_trg_UIInit = CreateTrigger()
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_UIInit, "UIInit")
#endif
    call TriggerAddAction(gg_trg_UIInit, function Trig_UIInitActions)
endfunction

//===========================================================================
// Trigger: GlobeInit
//===========================================================================
function Trig_GlobeInitActions takes nothing returns nothing
    // UI
    call DzLoadToc( "uitoc.toc" )
    call DzFrameClearAllPoints( DzFrameGetTooltip() )
    call DzFrameSetPoint( DzFrameGetTooltip(), 8, DzGetGameUI(), 8, 0.00, 0.143 )
    // 镜头
    call SetCameraField( CAMERA_FIELD_TARGET_DISTANCE, 2800.00, 0.00 )
endfunction

//===========================================================================
function InitTrig_GlobeInit takes nothing returns nothing
    set gg_trg_GlobeInit = CreateTrigger()
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_GlobeInit, "GlobeInit")
#endif
    call TriggerRegisterTimerEventSingle( gg_trg_GlobeInit, 0.00 )
    call TriggerAddAction(gg_trg_GlobeInit, function Trig_GlobeInitActions)
endfunction

//===========================================================================
// Trigger: Multiboard
//===========================================================================
function Trig_MultiboardFunc017A takes nothing returns nothing
    local integer ydul_j
    call YDLocal2Set(integer, "i", OperatorIntegerAdd(YDLocal2Get(integer, "i"), 1))
    call YDUserDataSet(player, GetEnumPlayer(), "TotalPanelLineIndex", integer, YDLocal2Get(integer, "i"))
    set ydul_j = 1
    loop
        exitwhen ydul_j > 5
        if ((ydul_j == 1)) then
            call MultiboardSetItemStyleBJ( udg_Multiboard, 1, YDLocal2Get(integer, "i"), true, true )
            call MultiboardSetItemIconBJ( udg_Multiboard, 1, YDLocal2Get(integer, "i"), "war3mapImported\\autoBlp101.blp" )
            call MultiboardSetItemWidthBJ( udg_Multiboard, 1, YDLocal2Get(integer, "i"), 6.00 )
            call MultiboardSetItemValueBJ( udg_Multiboard, ydul_j, YDLocal2Get(integer, "i"), YDUserDataGet(player, GetEnumPlayer(), "playerName", StringExt) )
        else
            if ((ydul_j == 2)) then
                call MultiboardSetItemWidthBJ( udg_Multiboard, 2, YDLocal2Get(integer, "i"), 3.00 )
                call MultiboardSetItemValueBJ( udg_Multiboard, ydul_j, YDLocal2Get(integer, "i"), "0" )
            else
                if ((ydul_j == 3)) then
                    call MultiboardSetItemWidthBJ( udg_Multiboard, 3, YDLocal2Get(integer, "i"), 3.50 )
                    call MultiboardSetItemValueBJ( udg_Multiboard, ydul_j, YDLocal2Get(integer, "i"), "|CffFFD24D0|r" )
                else
                    if ((ydul_j == 5)) then
                        call MultiboardSetItemWidthBJ( udg_Multiboard, 5, YDLocal2Get(integer, "i"), 7.00 )
                        call MultiboardSetItemValueBJ( udg_Multiboard, ydul_j, YDLocal2Get(integer, "i"), "|CffFFFF4D300|r/|cff00ff00300|r/|CffFF26260/0|r" )
                    else
                        if ((ydul_j == 4)) then
                            call MultiboardSetItemWidthBJ( udg_Multiboard, 4, YDLocal2Get(integer, "i"), 2.00 )
                            call MultiboardSetItemStyleBJ( udg_Multiboard, 4, YDLocal2Get(integer, "i"), false, true )
                            call MultiboardSetItemIconBJ( udg_Multiboard, 4, YDLocal2Get(integer, "i"), "ReplaceableTextures\\CommandButtons\\BTNSelectHeroOn.blp" )
                        else
                        endif
                    endif
                endif
            endif
        endif
        set ydul_j = ydul_j + 1
    endloop
endfunction

function Trig_MultiboardActions takes nothing returns nothing
    YDLocalInitialize()
    call CreateMultiboardBJ( 5, OperatorIntegerAdd(CountPlayersInForceBJ(udg_playerGroup), 1), "丧尸围城" )
    set udg_Multiboard = GetLastCreatedMultiboard()
    call MultiboardSetItemsWidth( udg_Multiboard, 0.05 )
    call MultiboardSetItemsStyle( udg_Multiboard, true, false )
    call MultiboardSetItemValueBJ( udg_Multiboard, 1, 1, "|cffffcc00玩家名字|r" )
    call MultiboardSetItemWidthBJ( udg_Multiboard, 1, 1, 6.00 )
    call MultiboardSetItemValueBJ( udg_Multiboard, 2, 1, "|cffff0000杀敌|r" )
    call MultiboardSetItemWidthBJ( udg_Multiboard, 2, 1, 3.00 )
    call MultiboardSetItemValueBJ( udg_Multiboard, 3, 1, "|cff00ff00当前收入|r" )
    call MultiboardSetItemWidthBJ( udg_Multiboard, 3, 1, 3.50 )
    call MultiboardSetItemValueBJ( udg_Multiboard, 5, 1, "|CffFFFF4D金钱|r / |cff00ff00木材|r / |CffFF9326人口|r" )
    call MultiboardSetItemWidthBJ( udg_Multiboard, 5, 1, 7.00 )
    call MultiboardSetItemValueBJ( udg_Multiboard, 4, 1, "|Cff00BFFF天赋|r" )
    call MultiboardSetItemWidthBJ( udg_Multiboard, 4, 1, 2.00 )
    call MultiboardMinimize( udg_Multiboard, false )
    call YDLocal1Set(integer, "i", 1)
    call ForForce( udg_playerGroup, function Trig_MultiboardFunc017A )
    call YDLocal1Release()
endfunction

//===========================================================================
function InitTrig_Multiboard takes nothing returns nothing
    set gg_trg_Multiboard = CreateTrigger()
#ifdef DEBUG
    call YDWESaveTriggerName(gg_trg_Multiboard, "Multiboard")
#endif
    call TriggerAddAction(gg_trg_Multiboard, function Trig_MultiboardActions)
endfunction

//===========================================================================
function InitCustomTriggers takes nothing returns nothing
    call InitTrig_monster(  )
    call InitTrig_MoveRect(  )
    call InitTrig_Init(  )
    call InitTrig_Camera(  )
    call InitTrig_AddXuanYun(  )
    call InitTrig_HurtTrigger(  )
    call InitTrig_Test(  )
    call InitTrig_Clock(  )
    call InitTrig_Damage(  )
    call InitTrig_HurtCenter(  )
    call InitTrig_CheckXieLou(  )
    call InitTrig_DeadEvent(  )
    call InitTrig_Clear(  )
    call InitTrig_HuoYuanSu(  )
    call InitTrig_RanBao(  )
    call InitTrig_shuiYuanSu(  )
    call InitTrig_leiYuanSu(  )
    call InitTrig_fengYuanSu(  )
    call InitTrig_leiBao(  )
    call InitTrig_zhenFa(  )
    call InitTrig_shaoShang(  )
    call InitTrig_dongShang(  )
    call InitTrig_hanleng(  )
    call InitTrig_ronghua(  )
    call InitTrig_huifu(  )
    call InitTrig_chaoDao(  )
    call InitTrig_chaoZai(  )
    call InitTrig_fengLeiJian(  )
    call InitTrig_UIInit(  )
    call InitTrig_GlobeInit(  )
    call InitTrig_Multiboard(  )
endfunction

//===========================================================================
function RunInitializationTriggers takes nothing returns nothing
    call ConditionalTriggerExecute( gg_trg_Camera )
endfunction

//***************************************************************************
//*
//*  Players
//*
//***************************************************************************

function InitCustomPlayerSlots takes nothing returns nothing

    // Player 0
    call SetPlayerStartLocation( Player(0), 0 )
    call SetPlayerColor( Player(0), ConvertPlayerColor(0) )
    call SetPlayerRacePreference( Player(0), RACE_PREF_HUMAN )
    call SetPlayerRaceSelectable( Player(0), true )
    call SetPlayerController( Player(0), MAP_CONTROL_USER )

    // Player 6
    call SetPlayerStartLocation( Player(6), 1 )
    call SetPlayerColor( Player(6), ConvertPlayerColor(6) )
    call SetPlayerRacePreference( Player(6), RACE_PREF_UNDEAD )
    call SetPlayerRaceSelectable( Player(6), true )
    call SetPlayerController( Player(6), MAP_CONTROL_COMPUTER )

    // Player 7
    call SetPlayerStartLocation( Player(7), 2 )
    call SetPlayerColor( Player(7), ConvertPlayerColor(7) )
    call SetPlayerRacePreference( Player(7), RACE_PREF_UNDEAD )
    call SetPlayerRaceSelectable( Player(7), true )
    call SetPlayerController( Player(7), MAP_CONTROL_COMPUTER )

    // Player 8
    call SetPlayerStartLocation( Player(8), 3 )
    call SetPlayerColor( Player(8), ConvertPlayerColor(8) )
    call SetPlayerRacePreference( Player(8), RACE_PREF_UNDEAD )
    call SetPlayerRaceSelectable( Player(8), true )
    call SetPlayerController( Player(8), MAP_CONTROL_COMPUTER )

    // Player 9
    call SetPlayerStartLocation( Player(9), 4 )
    call SetPlayerColor( Player(9), ConvertPlayerColor(9) )
    call SetPlayerRacePreference( Player(9), RACE_PREF_UNDEAD )
    call SetPlayerRaceSelectable( Player(9), true )
    call SetPlayerController( Player(9), MAP_CONTROL_COMPUTER )

    // Player 10
    call SetPlayerStartLocation( Player(10), 5 )
    call SetPlayerColor( Player(10), ConvertPlayerColor(10) )
    call SetPlayerRacePreference( Player(10), RACE_PREF_UNDEAD )
    call SetPlayerRaceSelectable( Player(10), true )
    call SetPlayerController( Player(10), MAP_CONTROL_COMPUTER )

    // Player 11
    call SetPlayerStartLocation( Player(11), 6 )
    call SetPlayerColor( Player(11), ConvertPlayerColor(11) )
    call SetPlayerRacePreference( Player(11), RACE_PREF_UNDEAD )
    call SetPlayerRaceSelectable( Player(11), true )
    call SetPlayerController( Player(11), MAP_CONTROL_COMPUTER )

endfunction

function InitCustomTeams takes nothing returns nothing
    // Force: TRIGSTR_024
    call SetPlayerTeam( Player(0), 0 )
    call SetPlayerTeam( Player(6), 0 )
    call SetPlayerTeam( Player(7), 0 )
    call SetPlayerTeam( Player(8), 0 )
    call SetPlayerTeam( Player(9), 0 )
    call SetPlayerTeam( Player(10), 0 )
    call SetPlayerTeam( Player(11), 0 )

endfunction

//***************************************************************************
//*
//*  Main Initialization
//*
//***************************************************************************

//===========================================================================
function main takes nothing returns nothing
    call SetCameraBounds( -30464.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 5120.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM), -19712.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 15872.0 - GetCameraMargin(CAMERA_MARGIN_TOP), -30464.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 15872.0 - GetCameraMargin(CAMERA_MARGIN_TOP), -19712.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 5120.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM) )
    call SetDayNightModels( "Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl", "Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl" )
    call NewSoundEnvironment( "Default" )
    call SetAmbientDaySound( "CityScapeDay" )
    call SetAmbientNightSound( "CityScapeNight" )
    call SetMapMusic( "Music", true, 0 )
    call CreateRegions(  )
    call CreateAllUnits(  )
    call InitBlizzard(  )
    call InitGlobals(  )
    call InitCustomTriggers(  )
    call RunInitializationTriggers(  )

endfunction

//***************************************************************************
//*
//*  Map Configuration
//*
//***************************************************************************

function config takes nothing returns nothing
    call SetMapName( "只是另外一张魔兽争霸的地图" )
    call SetMapDescription( "没有说明" )
    call SetPlayers( 7 )
    call SetTeams( 7 )
    call SetGamePlacement( MAP_PLACEMENT_USE_MAP_SETTINGS )

    call DefineStartLocation( 0, -2048.0, -192.0 )
    call DefineStartLocation( 1, -29120.0, 9920.0 )
    call DefineStartLocation( 2, -29184.0, 11904.0 )
    call DefineStartLocation( 3, -23424.0, 11264.0 )
    call DefineStartLocation( 4, -26496.0, 7360.0 )
    call DefineStartLocation( 5, -23680.0, 14720.0 )
    call DefineStartLocation( 6, -21440.0, 8000.0 )

    // Player setup
    call InitCustomPlayerSlots(  )
    call SetPlayerSlotAvailable( Player(0), MAP_CONTROL_USER )
    call SetPlayerSlotAvailable( Player(6), MAP_CONTROL_COMPUTER )
    call SetPlayerSlotAvailable( Player(7), MAP_CONTROL_COMPUTER )
    call SetPlayerSlotAvailable( Player(8), MAP_CONTROL_COMPUTER )
    call SetPlayerSlotAvailable( Player(9), MAP_CONTROL_COMPUTER )
    call SetPlayerSlotAvailable( Player(10), MAP_CONTROL_COMPUTER )
    call SetPlayerSlotAvailable( Player(11), MAP_CONTROL_COMPUTER )
    call InitGenericPlayerSlots(  )
endfunction

